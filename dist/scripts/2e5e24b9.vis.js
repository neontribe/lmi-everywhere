d3=function(){function e(e){return null!=e&&!isNaN(e)}function t(e){return e.length}function n(e){for(var t=1;e*t%1;)t*=10;return t}function i(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(i){e.prototype=t}}function r(){}function a(){}function o(e,t,n){return function(){var i=n.apply(t,arguments);return i===t?e:i}}function s(){}function l(e){function t(){for(var t,i=n,r=-1,a=i.length;a>++r;)(t=i[r].on)&&t.apply(this,arguments);return e}var n=[],i=new r;return t.on=function(t,r){var a,o=i.get(t);return 2>arguments.length?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(t)),r&&n.push(i.set(t,{on:r})),e)},t}function u(){oo.event.stopPropagation(),oo.event.preventDefault()}function c(){for(var e,t=oo.event;e=t.sourceEvent;)t=e;return t}function h(e,t){function n(){e.on(t,null)}e.on(t,function(){u(),n()},!0),setTimeout(n,0)}function d(e){for(var t=new s,n=0,i=arguments.length;i>++n;)t[arguments[n]]=l(t);return t.of=function(n,i){return function(r){try{var a=r.sourceEvent=oo.event;r.target=e,oo.event=r,t[r.type].apply(n,i)}finally{oo.event=a}}},t}function f(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>go&&(lo.scrollX||lo.scrollY)){n=oo.select(so.body).append("svg").style("position","absolute").style("top",0).style("left",0);var r=n[0][0].getScreenCTM();go=!(r.f||r.e),n.remove()}return go?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}function p(e){for(var t=-1,n=e.length,i=[];n>++t;)i.push(e[t]);return i}function m(e){return Array.prototype.slice.call(e)}function g(e){return yo(e,ko),e}function v(e){return function(){return xo(e,this)}}function b(e){return function(){return wo(e,this)}}function y(e,t){function n(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function r(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=oo.ns.qualify(e),null==t?e.local?i:n:"function"==typeof t?e.local?s:o:e.local?a:r}function x(e){return e.trim().replace(/\s+/g," ")}function w(e){return RegExp("(?:^|\\s+)"+oo.requote(e)+"(?:\\s+|$)","g")}function _(e,t){function n(){for(var n=-1;r>++n;)e[n](this,t)}function i(){for(var n=-1,i=t.apply(this,arguments);r>++n;)e[n](this,i)}e=e.trim().split(/\s+/).map(C);var r=e.length;return"function"==typeof t?i:n}function C(e){var t=w(e);return function(n,i){if(r=n.classList)return i?r.add(e):r.remove(e);var r=n.getAttribute("class")||"";i?(t.lastIndex=0,t.test(r)||n.setAttribute("class",x(r+" "+e))):n.setAttribute("class",x(r.replace(t," ")))}}function T(e,t,n){function i(){this.style.removeProperty(e)}function r(){this.style.setProperty(e,t,n)}function a(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}return null==t?i:"function"==typeof t?a:r}function k(e,t){function n(){delete this[e]}function i(){this[e]=t}function r(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?r:i}function E(e){return{__data__:e}}function D(e){return function(){return To(this,e)}}function S(e){return arguments.length||(e=oo.ascending),function(t,n){return!t-!n||e(t.__data__,n.__data__)}}function M(){}function j(e,t,n){function i(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function r(){var r=l(t,vo(arguments));i.call(this),this.addEventListener(e,this[o]=r,r.$=n),r._=t}function a(){var t,n=RegExp("^__on([^.]+)"+oo.requote(e)+"$");for(var i in this)if(t=i.match(n)){var r=this[i];this.removeEventListener(t[1],r,r.$),delete this[i]}}var o="__on"+e,s=e.indexOf("."),l=N;s>0&&(e=e.substring(0,s));var u=So.get(e);return u&&(e=u,l=P),s?t?r:i:t?M:a}function N(e,t){return function(n){var i=oo.event;oo.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{oo.event=i}}}function P(e,t){var n=N(e,t);return function(e){var t=this,i=e.relatedTarget;i&&(i===t||8&i.compareDocumentPosition(t))||n.call(t,e)}}function A(e,t){for(var n=0,i=e.length;i>n;n++)for(var r,a=e[n],o=0,s=a.length;s>o;o++)(r=a[o])&&t(r,o,n);return e}function q(e){return yo(e,Mo),e}function L(){}function H(e,t,n){return new O(e,t,n)}function O(e,t,n){this.h=e,this.s=t,this.l=n}function F(e,t,n){function i(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(o-a)*e/60:180>e?o:240>e?a+(o-a)*(240-e)/60:a}function r(e){return Math.round(255*i(e))}var a,o;return e=isNaN(e)?0:0>(e%=360)?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,a=2*n-o,tt(r(e+120),r(e),r(e-120))}function R(e){return e>0?1:0>e?-1:0}function I(e){return Math.acos(Math.max(-1,Math.min(1,e)))}function B(e){return e>1?Lo/2:-1>e?-Lo/2:Math.asin(e)}function z(e){return(Math.exp(e)-Math.exp(-e))/2}function W(e){return(Math.exp(e)+Math.exp(-e))/2}function U(e){return(e=Math.sin(e/2))*e}function $(e,t,n){return new G(e,t,n)}function G(e,t,n){this.h=e,this.c=t,this.l=n}function V(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),X(n,Math.cos(e*=Oo)*t,Math.sin(e)*t)}function X(e,t,n){return new Y(e,t,n)}function Y(e,t,n){this.l=e,this.a=t,this.b=n}function K(e,t,n){var i=(e+16)/116,r=i+t/500,a=i-n/200;return r=J(r)*Bo,i=J(i)*zo,a=J(a)*Wo,tt(et(3.2404542*r-1.5371385*i-.4985314*a),et(-.969266*r+1.8760108*i+.041556*a),et(.0556434*r-.2040259*i+1.0572252*a))}function Q(e,t,n){return e>0?$(Math.atan2(n,t)*Fo,Math.sqrt(t*t+n*n),e):$(0/0,0/0,e)}function J(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function Z(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function et(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function tt(e,t,n){return new nt(e,t,n)}function nt(e,t,n){this.r=e,this.g=t,this.b=n}function it(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function rt(e,t,n){var i,r,a,o=0,s=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(e))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return t(lt(r[0]),lt(r[1]),lt(r[2]))}return(a=Go.get(e))?t(a.r,a.g,a.b):(null!=e&&"#"===e.charAt(0)&&(4===e.length?(o=e.charAt(1),o+=o,s=e.charAt(2),s+=s,l=e.charAt(3),l+=l):7===e.length&&(o=e.substring(1,3),s=e.substring(3,5),l=e.substring(5,7)),o=parseInt(o,16),s=parseInt(s,16),l=parseInt(l,16)),t(o,s,l))}function at(e,t,n){var i,r,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(r=.5>l?s/(o+a):s/(2-o-a),i=e==o?(t-n)/s+(n>t?6:0):t==o?(n-e)/s+2:(e-t)/s+4,i*=60):(i=0/0,r=l>0&&1>l?0:i),H(i,r,l)}function ot(e,t,n){e=st(e),t=st(t),n=st(n);var i=Z((.4124564*e+.3575761*t+.1804375*n)/Bo),r=Z((.2126729*e+.7151522*t+.072175*n)/zo),a=Z((.0193339*e+.119192*t+.9503041*n)/Wo);return X(116*r-16,500*(i-r),200*(r-a))}function st(e){return.04045>=(e/=255)?e/12.92:Math.pow((e+.055)/1.055,2.4)}function lt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function ut(e){return"function"==typeof e?e:function(){return e}}function ct(e){return e}function ht(e){return function(t,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),dt(t,n,e,i)}}function dt(e,t,n,i){function r(){var e,t=l.status;if(!t&&l.responseText||t>=200&&300>t||304===t){try{e=n.call(a,l)}catch(i){return o.error.call(a,i),void 0}o.load.call(a,e)}else o.error.call(a,l)}var a={},o=oo.dispatch("progress","load","error"),s={},l=new(lo.XDomainRequest&&/^(http(s)?:)?\/\//.test(e)?XDomainRequest:XMLHttpRequest);return"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(e){var t=oo.event;oo.event=e;try{o.progress.call(a,l)}finally{oo.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),2>arguments.length?s[e]:(null==t?delete s[e]:s[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(vo(arguments)))}}),a.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var o in s)l.setRequestHeader(o,s[o]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=r&&a.on("error",r).on("load",function(e){r(null,e)}),l.send(null==i?null:i),a},a.abort=function(){return l.abort(),a},oo.rebind(a,o,"on"),null==i?a:a.get(ft(i))}function ft(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function pt(e,t){function n(e,n,a){3>arguments.length&&(a=n,n=null);var o=oo.xhr(e,t,a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?i:r(e)):n},o.row(n)}function i(e){return n.parse(e.responseText)}function r(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(s).join(e)}function s(e){return l.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var l=RegExp('["'+e+"\n]"),u=e.charCodeAt(0);return n.parse=function(e,t){var i;return n.parseRows(e,function(e,n){if(i)return i(e,n-1);var r=Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");i=t?function(e,n){return t(r(e),n)}:r})},n.parseRows=function(e,t){function n(){if(c>=l)return o;if(r)return r=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;l>n++;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var i=e.charCodeAt(n+1);return 13===i?(r=!0,10===e.charCodeAt(n+2)&&++c):10===i&&(r=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;l>c;){var i=e.charCodeAt(c++),s=1;if(10===i)r=!0;else if(13===i)r=!0,10===e.charCodeAt(c)&&(++c,++s);else if(i!==u)continue;return e.substring(t,c-s)}return e.substring(t)}for(var i,r,a={},o={},s=[],l=e.length,c=0,h=0;(i=n())!==o;){for(var d=[];i!==a&&i!==o;)d.push(i),i=n();(!t||(d=t(d,h++)))&&s.push(d)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var i=new a,r=[];return t.forEach(function(e){for(var t in e)i.has(t)||r.push(i.add(t))}),[r.map(s).join(e)].concat(t.map(function(t){return r.map(function(e){return s(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n}function mt(){var e=gt(),t=vt()-e;t>24?(isFinite(t)&&(clearTimeout(Ko),Ko=setTimeout(mt,t)),Yo=0):(Yo=1,Qo(mt))}function gt(){for(var e=Date.now(),t=Vo;t;)e>=t.time&&(t.flush=t.callback(e-t.time)),t=t.next;return e}function vt(){for(var e,t=Vo,n=1/0;t;)t.flush?t=e?e.next=t.next:Vo=t.next:(n>t.time&&(n=t.time),t=(e=t).next);return Xo=e,n}function bt(e,t){var n=Math.pow(10,3*Math.abs(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function yt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function xt(e){return e+""}function wt(e,t){e&&ss.hasOwnProperty(e.type)&&ss[e.type](e,t)}function _t(e,t,n){var i,r=-1,a=e.length-n;for(t.lineStart();a>++r;)i=e[r],t.point(i[0],i[1]);t.lineEnd()}function Ct(e,t){var n=-1,i=e.length;for(t.polygonStart();i>++n;)_t(e[n],t,1);t.polygonEnd()}function Tt(){function e(e,t){e*=Oo,t=t*Oo/2+Lo/4;var n=e-i,o=Math.cos(t),s=Math.sin(t),l=a*s,u=r*o+l*Math.cos(n),c=l*Math.sin(n);us+=Math.atan2(c,u),i=e,r=o,a=s}var t,n,i,r,a;cs.point=function(o,s){cs.point=e,i=(t=o)*Oo,r=Math.cos(s=(n=s)*Oo/2+Lo/4),a=Math.sin(s)},cs.lineEnd=function(){e(t,n)}}function kt(e){var t=e[0],n=e[1],i=Math.cos(n);return[i*Math.cos(t),i*Math.sin(t),Math.sin(n)]}function Et(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Dt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function St(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Mt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function jt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Nt(e){return[Math.atan2(e[1],e[0]),Math.asin(Math.max(-1,Math.min(1,e[2])))]}function Pt(e,t){return Ho>Math.abs(e[0]-t[0])&&Ho>Math.abs(e[1]-t[1])}function At(e,t){if(!hs){++ds,e*=Oo;var n=Math.cos(t*=Oo);fs+=(n*Math.cos(e)-fs)/ds,ps+=(n*Math.sin(e)-ps)/ds,ms+=(Math.sin(t)-ms)/ds}}function qt(){var e,t;hs=1,Lt(),hs=2;var n=gs.point;gs.point=function(i,r){n(e=i,t=r)},gs.lineEnd=function(){gs.point(e,t),Ht(),gs.lineEnd=Ht}}function Lt(){function e(e,r){e*=Oo;var a=Math.cos(r*=Oo),o=a*Math.cos(e),s=a*Math.sin(e),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*s)*u+(u=i*o-t*l)*u+(u=t*s-n*o)*u),t*o+n*s+i*l);ds+=u,fs+=u*(t+(t=o)),ps+=u*(n+(n=s)),ms+=u*(i+(i=l))}var t,n,i;hs>1||(1>hs&&(hs=1,ds=fs=ps=ms=0),gs.point=function(r,a){r*=Oo;var o=Math.cos(a*=Oo);t=o*Math.cos(r),n=o*Math.sin(r),i=Math.sin(a),gs.point=e})}function Ht(){gs.point=At}function Ot(){return!0}function Ft(e,t,n,i,r){var a=[],o=[];if(e.forEach(function(e){if(!(0>=(t=e.length-1))){var t,n=e[0],i=e[t];if(Pt(n,i)){r.lineStart();for(var s=0;t>s;++s)r.point((n=e[s])[0],n[1]);return r.lineEnd(),void 0}var l={point:n,points:e,other:null,visited:!1,entry:!0,subject:!0},u={point:n,points:[n],other:l,visited:!1,entry:!1,subject:!1};l.other=u,a.push(l),o.push(u),l={point:i,points:[i],other:null,visited:!1,entry:!1,subject:!0},u={point:i,points:[i],other:l,visited:!1,entry:!0,subject:!1},l.other=u,a.push(l),o.push(u)}}),o.sort(t),Rt(a),Rt(o),a.length){if(n)for(var s=1,l=!n(o[0].point),u=o.length;u>s;++s)o[s].entry=l=!l;for(var c,h,d,f=a[0];;){for(c=f;c.visited;)if((c=c.next)===f)return;h=c.points,r.lineStart();do{if(c.visited=c.other.visited=!0,c.entry){if(c.subject)for(var s=0;h.length>s;s++)r.point((d=h[s])[0],d[1]);else i(c.point,c.next.point,1,r);c=c.next}else{if(c.subject){h=c.prev.points;for(var s=h.length;--s>=0;)r.point((d=h[s])[0],d[1])}else i(c.point,c.prev.point,-1,r);c=c.prev}c=c.other,h=c.points}while(!c.visited);r.lineEnd()}}}function Rt(e){if(t=e.length){for(var t,n,i=0,r=e[0];t>++i;)r.next=n=e[i],n.prev=r,r=n;r.next=n=e[0],n.prev=r}}function It(e,t,n){return function(i){function r(t,n){e(t,n)&&i.point(t,n)}function a(e,t){g.point(e,t)}function o(){v.point=a,g.lineStart()}function s(){v.point=r,g.lineEnd()}function l(e,t){y.point(e,t),m.push([e,t])}function u(){y.lineStart(),m=[]}function c(){l(m[0][0],m[0][1]),y.lineEnd();var e,t=y.clean(),n=b.buffer(),r=n.length;if(!r)return p=!0,f+=Wt(m,-1),m=null,void 0;if(m=null,1&t){e=n[0],d+=Wt(e,1);var a,r=e.length-1,o=-1;for(i.lineStart();r>++o;)i.point((a=e[o])[0],a[1]);return i.lineEnd(),void 0}r>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Bt))}var h,d,f,p,m,g=t(i),v={point:r,lineStart:o,lineEnd:s,polygonStart:function(){v.point=l,v.lineStart=u,v.lineEnd=c,p=!1,f=d=0,h=[],i.polygonStart()},polygonEnd:function(){v.point=r,v.lineStart=o,v.lineEnd=s,h=oo.merge(h),h.length?Ft(h,Ut,null,n,i):(-Ho>d||p&&-Ho>f)&&(i.lineStart(),n(null,null,1,i),i.lineEnd()),i.polygonEnd(),h=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},b=zt(),y=t(b);return v}}function Bt(e){return e.length>1}function zt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:M,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Wt(e,t){if(!(n=e.length))return 0;for(var n,i,r,a=0,o=0,s=e[0],l=s[0],u=s[1],c=Math.cos(u),h=Math.atan2(t*Math.sin(l)*c,Math.sin(u)),d=1-t*Math.cos(l)*c,f=h;n>++a;)s=e[a],c=Math.cos(u=s[1]),i=Math.atan2(t*Math.sin(l=s[0])*c,Math.sin(u)),r=1-t*Math.cos(l)*c,Ho>Math.abs(d-2)&&Ho>Math.abs(r-2)||(Ho>Math.abs(r)||Ho>Math.abs(d)||(Ho>Math.abs(Math.abs(i-h)-Lo)?r+d>2&&(o+=4*(i-h)):o+=Ho>Math.abs(d-2)?4*(i-f):((3*Lo+i-h)%(2*Lo)-Lo)*(d+r)),f=h,h=i,d=r);return o}function Ut(e,t){return(0>(e=e.point)[0]?e[1]-Lo/2-Ho:Lo/2-e[1])-(0>(t=t.point)[0]?t[1]-Lo/2-Ho:Lo/2-t[1])}function $t(e){var t,n=0/0,i=0/0,r=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?Lo:-Lo,l=Math.abs(a-n);Ho>Math.abs(l-Lo)?(e.point(n,i=(i+o)/2>0?Lo/2:-Lo/2),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),e.point(a,i),t=0):r!==s&&l>=Lo&&(Ho>Math.abs(n-r)&&(n-=r*Ho),Ho>Math.abs(a-s)&&(a-=s*Ho),i=Gt(n,i,a,o),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(s,i),t=0),e.point(n=a,i=o),r=s},lineEnd:function(){e.lineEnd(),n=i=0/0},clean:function(){return 2-t}}}function Gt(e,t,n,i){var r,a,o=Math.sin(e-n);return Math.abs(o)>Ho?Math.atan((Math.sin(t)*(a=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(t))*Math.sin(e))/(r*a*o)):(t+i)/2}function Vt(e,t,n,i){var r;if(null==e)r=n*Lo/2,i.point(-Lo,r),i.point(0,r),i.point(Lo,r),i.point(Lo,0),i.point(Lo,-r),i.point(0,-r),i.point(-Lo,-r),i.point(-Lo,0),i.point(-Lo,r);else if(Math.abs(e[0]-t[0])>Ho){var a=(e[0]<t[0]?1:-1)*Lo;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Xt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var f,p=[h,d],m=t(h,d),g=o?m?0:r(h,d):m?r(h+(0>h?Lo:-Lo),d):0;if(!n&&(u=l=m)&&e.lineStart(),m!==l&&(f=i(n,p),(Pt(n,f)||Pt(p,f))&&(p[0]+=Ho,p[1]+=Ho,m=t(p[0],p[1]))),m!==l)c=0,m?(e.lineStart(),f=i(p,n),e.point(f[0],f[1])):(f=i(n,p),e.point(f[0],f[1]),e.lineEnd()),n=f;else if(s&&n&&o^m){var v;g&a||!(v=i(p,n,!0))||(c=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!m||n&&Pt(n,p)||e.point(p[0],p[1]),n=p,l=m,a=g},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function i(e,t,n){var i=kt(e),r=kt(t),o=[1,0,0],s=Dt(i,r),l=Et(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var h=a*l/c,d=-a*u/c,f=Dt(o,s),p=Mt(o,h),m=Mt(s,d);St(p,m);var g=f,v=Et(p,g),b=Et(g,g),y=v*v-b*(Et(p,p)-1);if(!(0>y)){var x=Math.sqrt(y),w=Mt(g,(-v-x)/b);if(St(w,p),w=Nt(w),!n)return w;var _,C=e[0],T=t[0],k=e[1],E=t[1];C>T&&(_=C,C=T,T=_);var D=T-C,S=Ho>Math.abs(D-Lo),M=S||Ho>D;if(!S&&k>E&&(_=k,k=E,E=_),M?S?k+E>0^w[1]<(Ho>Math.abs(w[0]-C)?k:E):w[1]>=k&&E>=w[1]:D>Lo^(w[0]>=C&&T>=w[0])){var j=Mt(g,(-v+x)/b);return St(j,p),[w,Nt(j)]}}}function r(t,n){var i=o?e:Lo-e,r=0;return-i>t?r|=1:t>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var a=Math.cos(e),o=a>0,s=Math.abs(a)>Ho,l=ln(e,6*Oo);return It(t,n,l)}function Yt(e,t,n,i){function r(i,r){return Ho>Math.abs(i[0]-e)?r>0?0:3:Ho>Math.abs(i[0]-n)?r>0?2:1:Ho>Math.abs(i[1]-t)?r>0?1:0:r>0?3:2}function a(e,t){return o(e.point,t.point)}function o(e,t){var n=r(e,1),i=r(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}function s(r,a){var o=a[0]-r[0],s=a[1]-r[1],l=[0,1];return Ho>Math.abs(o)&&Ho>Math.abs(s)?r[0]>=e&&n>=r[0]&&r[1]>=t&&i>=r[1]:Kt(e-r[0],o,l)&&Kt(r[0]-n,-o,l)&&Kt(t-r[1],s,l)&&Kt(r[1]-i,-s,l)?(1>l[1]&&(a[0]=r[0]+l[1]*o,a[1]=r[1]+l[1]*s),l[0]>0&&(r[0]+=l[0]*o,r[1]+=l[0]*s),!0):!1}return function(l){function u(a){var o=r(a,-1),s=c([0===o||3===o?e:n,o>1?i:t]);return s}function c(e){for(var t=0,n=y.length,i=e[1],r=0;n>r;++r)for(var a,o=1,s=y[r],l=s.length,u=s[0];l>o;++o)a=s[o],i>=u[1]?a[1]>i&&h(u,a,e)>0&&++t:i>=a[1]&&0>h(u,a,e)&&--t,u=a;return 0!==t}function h(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function d(a,s,l,u){var c=0,h=0;if(null==a||(c=r(a,l))!==(h=r(s,l))||0>o(a,s)^l>0){do u.point(0===c||3===c?e:n,c>1?i:t);while((c=(c+l+4)%4)!==h)}else u.point(s[0],s[1])}function f(r,a){return r>=e&&n>=r&&a>=t&&i>=a}function p(e,t){f(e,t)&&l.point(e,t)}function m(){j.point=v,y&&y.push(x=[]),D=!0,E=!1,T=k=0/0}function g(){b&&(v(w,_),C&&E&&M.rejoin(),b.push(M.buffer())),j.point=p,E&&l.lineEnd()}function v(e,t){e=Math.max(-bs,Math.min(bs,e)),t=Math.max(-bs,Math.min(bs,t));var n=f(e,t);if(y&&x.push([e,t]),D)w=e,_=t,C=n,D=!1,n&&(l.lineStart(),l.point(e,t));else if(n&&E)l.point(e,t);else{var i=[T,k],r=[e,t];s(i,r)?(E||(l.lineStart(),l.point(i[0],i[1])),l.point(r[0],r[1]),n||l.lineEnd()):n&&(l.lineStart(),l.point(e,t))}T=e,k=t,E=n}var b,y,x,w,_,C,T,k,E,D,S=l,M=zt(),j={point:p,lineStart:m,lineEnd:g,polygonStart:function(){l=M,b=[],y=[]},polygonEnd:function(){l=S,(b=oo.merge(b)).length?(l.polygonStart(),Ft(b,a,u,d,l),l.polygonEnd()):c([e,t])&&(l.polygonStart(),l.lineStart(),d(null,null,1,l),l.lineEnd(),l.polygonEnd()),b=y=x=null}};return j}}function Kt(e,t,n){if(Ho>Math.abs(t))return 0>=e;var i=e/t;if(t>0){if(i>n[1])return!1;i>n[0]&&(n[0]=i)}else{if(n[0]>i)return!1;n[1]>i&&(n[1]=i)}return!0}function Qt(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),n}function Jt(e){function t(t){function i(n,i){n=e(n,i),t.point(n[0],n[1])}function a(){c=0/0,m.point=o,t.lineStart()}function o(i,a){var o=kt([i,a]),s=e(i,a);n(c,h,u,d,f,p,c=s[0],h=s[1],u=i,d=o[0],f=o[1],p=o[2],r,t),t.point(c,h)}function s(){m.point=i,t.lineEnd()}function l(){var e,i,l,g,v,b,y;a(),m.point=function(t,n){o(e=t,i=n),l=c,g=h,v=d,b=f,y=p,m.point=o},m.lineEnd=function(){n(c,h,u,d,f,p,l,g,e,v,b,y,r,t),m.lineEnd=s,s()}}var u,c,h,d,f,p,m={point:i,lineStart:a,lineEnd:s,polygonStart:function(){t.polygonStart(),m.lineStart=l},polygonEnd:function(){t.polygonEnd(),m.lineStart=a}};return m}function n(t,r,a,o,s,l,u,c,h,d,f,p,m,g){var v=u-t,b=c-r,y=v*v+b*b;if(y>4*i&&m--){var x=o+d,w=s+f,_=l+p,C=Math.sqrt(x*x+w*w+_*_),T=Math.asin(_/=C),k=Ho>Math.abs(Math.abs(_)-1)?(a+h)/2:Math.atan2(w,x),E=e(k,T),D=E[0],S=E[1],M=D-t,j=S-r,N=b*M-v*j;(N*N/y>i||Math.abs((v*M+b*j)/y-.5)>.3)&&(n(t,r,a,o,s,l,D,S,k,x/=C,w/=C,_,m,g),g.point(D,S),n(D,S,k,x,w,_,u,c,h,d,f,p,m,g))}}var i=.5,r=16;return t.precision=function(e){return arguments.length?(r=(i=e*e)>0&&16,t):Math.sqrt(i)},t}function Zt(e){return en(function(){return e})()}function en(e){function t(e){return e=o(e[0]*Oo,e[1]*Oo),[e[0]*c+s,l-e[1]*c]}function n(e){return e=o.invert((e[0]-s)/c,(l-e[1])/c),e&&[e[0]*Fo,e[1]*Fo]}function i(){o=Qt(a=rn(m,g,v),r);var e=r(f,p);return s=h-e[0]*c,l=d+e[1]*c,t}var r,a,o,s,l,u=Jt(function(e,t){return e=r(e,t),[e[0]*c+s,l-e[1]*c]}),c=150,h=480,d=250,f=0,p=0,m=0,g=0,v=0,b=vs,y=ct,x=null,w=null;return t.stream=function(e){return tn(a,b(u(y(e))))},t.clipAngle=function(e){return arguments.length?(b=null==e?(x=e,vs):Xt((x=+e)*Oo),t):x},t.clipExtent=function(e){return arguments.length?(w=e,y=null==e?ct:Yt(e[0][0],e[0][1],e[1][0],e[1][1]),t):w},t.scale=function(e){return arguments.length?(c=+e,i()):c},t.translate=function(e){return arguments.length?(h=+e[0],d=+e[1],i()):[h,d]},t.center=function(e){return arguments.length?(f=e[0]%360*Oo,p=e[1]%360*Oo,i()):[f*Fo,p*Fo]},t.rotate=function(e){return arguments.length?(m=e[0]%360*Oo,g=e[1]%360*Oo,v=e.length>2?e[2]%360*Oo:0,i()):[m*Fo,g*Fo,v*Fo]},oo.rebind(t,u,"precision"),function(){return r=e.apply(this,arguments),t.invert=r.invert&&n,i()}}function tn(e,t){return{point:function(n,i){i=e(n*Oo,i*Oo),n=i[0],t.point(n>Lo?n-2*Lo:-Lo>n?n+2*Lo:n,i[1])},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function nn(e,t){return[e,t]}function rn(e,t,n){return e?t||n?Qt(on(e),sn(t,n)):on(e):t||n?sn(t,n):nn}function an(e){return function(t,n){return t+=e,[t>Lo?t-2*Lo:-Lo>t?t+2*Lo:t,n]}}function on(e){var t=an(e);return t.invert=an(-e),t}function sn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*i+s*r;return[Math.atan2(l*a-c*o,s*i-u*r),Math.asin(Math.max(-1,Math.min(1,c*a+l*o)))]}var i=Math.cos(e),r=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*a-l*o;return[Math.atan2(l*a+u*o,s*i+c*r),Math.asin(Math.max(-1,Math.min(1,c*i-s*r)))]},n}function ln(e,t){var n=Math.cos(e),i=Math.sin(e);return function(r,a,o,s){null!=r?(r=un(n,r),a=un(n,a),(o>0?a>r:r>a)&&(r+=2*o*Lo)):(r=e+2*o*Lo,a=e);for(var l,u=o*t,c=r;o>0?c>a:a>c;c-=u)s.point((l=Nt([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],l[1])}}function un(e,t){var n=kt(t);n[0]-=e,jt(n);var i=I(-n[1]);return((0>-n[2]?-i:i)+2*Math.PI-Ho)%(2*Math.PI)}function cn(e,t,n){var i=oo.range(e,t-Ho,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function hn(e,t,n){var i=oo.range(e,t-Ho,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function dn(e){return e.source}function fn(e){return e.target}function pn(e,t,n,i){var r=Math.cos(t),a=Math.sin(t),o=Math.cos(i),s=Math.sin(i),l=r*Math.cos(e),u=r*Math.sin(e),c=o*Math.cos(n),h=o*Math.sin(n),d=2*Math.asin(Math.sqrt(U(i-t)+r*o*U(n-e))),f=1/Math.sin(d),p=d?function(e){var t=Math.sin(e*=d)*f,n=Math.sin(d-e)*f,i=n*l+t*c,r=n*u+t*h,o=n*a+t*s;return[Math.atan2(r,i)*Fo,Math.atan2(o,Math.sqrt(i*i+r*r))*Fo]}:function(){return[e*Fo,t*Fo]};return p.distance=d,p}function mn(){function e(e,r){var a=Math.sin(r*=Oo),o=Math.cos(r),s=Math.abs((e*=Oo)-t),l=Math.cos(s);ys+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=i*a-n*o*l)*s),n*a+i*o*l),t=e,n=a,i=o}var t,n,i;xs.point=function(r,a){t=r*Oo,n=Math.sin(a*=Oo),i=Math.cos(a),xs.point=e},xs.lineEnd=function(){xs.point=xs.lineEnd=M}}function gn(e){var t=0,n=Lo/3,i=en(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*Lo/180,n=e[1]*Lo/180):[180*(t/Lo),180*(n/Lo)]},r}function vn(e,t){function n(e,t){var n=Math.sqrt(a-2*r*Math.sin(t))/r;return[n*Math.sin(e*=r),o-n*Math.cos(e)]}var i=Math.sin(e),r=(i+Math.sin(t))/2,a=1+i*(2*r-i),o=Math.sqrt(a)/r;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/r,B((a-(e*e+n*n)*r*r)/(2*r))]},n}function bn(){function e(e,t){_s+=r*e-i*t,i=e,r=t}var t,n,i,r;Ds.point=function(a,o){Ds.point=e,t=i=a,n=r=o},Ds.lineEnd=function(){e(t,n)}}function yn(e,t){Cs>e&&(Cs=e),e>ks&&(ks=e),Ts>t&&(Ts=t),t>Es&&(Es=t)}function xn(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),s.point=n}function n(e,t){o.push("L",e,",",t)}function i(){s.point=e}function r(){o.push("Z")}var a=wn(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:i,polygonStart:function(){s.lineEnd=r},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(e){return a=wn(e),s},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return s}function wn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function _n(e,t){hs||(fs+=e,ps+=t,++ms)}function Cn(){function e(e,i){var r=e-t,a=i-n,o=Math.sqrt(r*r+a*a);fs+=o*(t+e)/2,ps+=o*(n+i)/2,ms+=o,t=e,n=i}var t,n;if(1!==hs){if(!(1>hs))return;hs=1,fs=ps=ms=0}Ms.point=function(i,r){Ms.point=e,t=i,n=r}}function Tn(){Ms.point=_n}function kn(){function e(e,t){var n=r*e-i*t;fs+=n*(i+e),ps+=n*(r+t),ms+=3*n,i=e,r=t}var t,n,i,r;2>hs&&(hs=2,fs=ps=ms=0),Ms.point=function(a,o){Ms.point=e,t=i=a,n=r=o},Ms.lineEnd=function(){e(t,n)}}function En(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,o,0,2*Lo)}function n(t,n){e.moveTo(t,n),s.point=i}function i(t,n){e.lineTo(t,n)}function r(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:r,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(e){return o=e,s},result:M};return s}function Dn(e){var t=Jt(function(t,n){return e([t*Fo,n*Fo])});return function(e){return e=t(e),{point:function(t,n){e.point(t*Oo,n*Oo)},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}}function Sn(e,t){function n(t,n){var i=Math.cos(t),r=Math.cos(n),a=e(i*r);return[a*r*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var i=Math.sqrt(e*e+n*n),r=t(i),a=Math.sin(r),o=Math.cos(r);return[Math.atan2(e*a,i*o),Math.asin(i&&n*a/i)]},n}function Mn(e,t){function n(e,t){var n=Ho>Math.abs(Math.abs(t)-Lo/2)?0:o/Math.pow(r(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}var i=Math.cos(e),r=function(e){return Math.tan(Lo/4+e/2)},a=e===t?Math.sin(e):Math.log(i/Math.cos(t))/Math.log(r(t)/r(e)),o=i*Math.pow(r(e),a)/a;return a?(n.invert=function(e,t){var n=o-t,i=R(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/i,1/a))-Lo/2]},n):Nn}function jn(e,t){function n(e,t){var n=a-t;return[n*Math.sin(r*e),a-n*Math.cos(r*e)]}var i=Math.cos(e),r=e===t?Math.sin(e):(i-Math.cos(t))/(t-e),a=i/r+e;return Ho>Math.abs(r)?nn:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/r,a-R(r)*Math.sqrt(e*e+n*n)]},n)}function Nn(e,t){return[e,Math.log(Math.tan(Lo/4+t/2))]}function Pn(e){var t,n=Zt(e),i=n.scale,r=n.translate,a=n.clipExtent;return n.scale=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Lo*i(),l=r();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}function An(e,t){var n=Math.cos(t)*Math.sin(e);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(t),Math.cos(e))]}function qn(e){function t(t){function o(){u.push("M",a(e(c),s))}for(var l,u=[],c=[],h=-1,d=t.length,f=ut(n),p=ut(i);d>++h;)r.call(this,l=t[h],h)?c.push([+f.call(this,l,h),+p.call(this,l,h)]):c.length&&(o(),c=[]);return c.length&&o(),u.length?u.join(""):null}var n=Ln,i=Hn,r=Ot,a=On,o=a.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?a=e:(a=Ls.get(e)||On).key,t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function Ln(e){return e[0]}function Hn(e){return e[1]}function On(e){return e.join("L")}function Fn(e){return On(e)+"Z"}function Rn(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];n>++t;)r.push("V",(i=e[t])[1],"H",i[0]);return r.join("")}function In(e){for(var t=0,n=e.length,i=e[0],r=[i[0],",",i[1]];n>++t;)r.push("H",(i=e[t])[0],"V",i[1]);return r.join("")}function Bn(e,t){return 4>e.length?On(e):e[1]+Un(e.slice(1,e.length-1),$n(e,t))}function zn(e,t){return 3>e.length?On(e):e[0]+Un((e.push(e[0]),e),$n([e[e.length-2]].concat(e,[e[1]]),t))}function Wn(e,t){return 3>e.length?On(e):e[0]+Un(e,$n(e,t))}function Un(e,t){if(1>t.length||e.length!=t.length&&e.length!=t.length+2)return On(e);var n=e.length!=t.length,i="",r=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(i+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],r=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,i+="C"+(r[0]+o[0])+","+(r[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;t.length>u;u++,l++)a=e[l],s=t[u],i+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=e[l];i+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return i}function $n(e,t){for(var n,i=[],r=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;l>++s;)n=a,a=o,o=e[s],i.push([r*(o[0]-n[0]),r*(o[1]-n[1])]);return i}function Gn(e){if(3>e.length)return On(e);var t=1,n=e.length,i=e[0],r=i[0],a=i[1],o=[r,r,r,(i=e[1])[0]],s=[a,a,a,i[1]],l=[r,",",a];for(Qn(l,o,s);n>++t;)i=e[t],o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Qn(l,o,s);for(t=-1;2>++t;)o.shift(),o.push(i[0]),s.shift(),s.push(i[1]),Qn(l,o,s);return l.join("")}function Vn(e){if(4>e.length)return On(e);for(var t,n=[],i=-1,r=e.length,a=[0],o=[0];3>++i;)t=e[i],a.push(t[0]),o.push(t[1]);for(n.push(Kn(Fs,a)+","+Kn(Fs,o)),--i;r>++i;)t=e[i],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Qn(n,a,o);return n.join("")}function Xn(e){for(var t,n,i=-1,r=e.length,a=r+4,o=[],s=[];4>++i;)n=e[i%r],o.push(n[0]),s.push(n[1]);for(t=[Kn(Fs,o),",",Kn(Fs,s)],--i;a>++i;)n=e[i%r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Qn(t,o,s);return t.join("")}function Yn(e,t){var n=e.length-1;if(n)for(var i,r,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,u=-1;n>=++u;)i=e[u],r=u/n,i[0]=t*i[0]+(1-t)*(a+r*s),i[1]=t*i[1]+(1-t)*(o+r*l);return Gn(e)}function Kn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Qn(e,t,n){e.push("C",Kn(Hs,t),",",Kn(Hs,n),",",Kn(Os,t),",",Kn(Os,n),",",Kn(Fs,t),",",Kn(Fs,n))}function Jn(e,t){return(t[1]-e[1])/(t[0]-e[0])
}function Zn(e){for(var t=0,n=e.length-1,i=[],r=e[0],a=e[1],o=i[0]=Jn(r,a);n>++t;)i[t]=(o+(o=Jn(r=a,a=e[t+1])))/2;return i[t]=o,i}function ei(e){for(var t,n,i,r,a=[],o=Zn(e),s=-1,l=e.length-1;l>++s;)t=Jn(e[s],e[s+1]),1e-6>Math.abs(t)?o[s]=o[s+1]=0:(n=o[s]/t,i=o[s+1]/t,r=n*n+i*i,r>9&&(r=3*t/Math.sqrt(r),o[s]=r*n,o[s+1]=r*i));for(s=-1;l>=++s;)r=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([r||0,o[s]*r||0]);return a}function ti(e){return 3>e.length?On(e):e[0]+Un(e,ei(e))}function ni(e,t,n,i){var r,a,o,s,l,u,c;return r=i[e],a=r[0],o=r[1],r=i[t],s=r[0],l=r[1],r=i[n],u=r[0],c=r[1],(c-o)*(s-a)-(l-o)*(u-a)>0}function ii(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function ri(e,t,n,i){var r=e[0],a=n[0],o=t[0]-r,s=i[0]-a,l=e[1],u=n[1],c=t[1]-l,h=i[1]-u,d=(s*(l-u)-h*(r-a))/(h*o-s*c);return[r+d*o,l+d*c]}function ai(e,t){var n={list:e.map(function(e,t){return{index:t,x:e[0],y:e[1]}}).sort(function(e,t){return e.y<t.y?-1:e.y>t.y?1:e.x<t.x?-1:e.x>t.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(e,t){return{edge:e,side:t,vertex:null,l:null,r:null}},insert:function(e,t){t.l=e,t.r=e.r,e.r.l=t,e.r=t},leftBound:function(e){var t=i.leftEnd;do t=t.r;while(t!=i.rightEnd&&r.rightOf(t,e));return t=t.l},del:function(e){e.l.r=e.r,e.r.l=e.l,e.edge=null},right:function(e){return e.r},left:function(e){return e.l},leftRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[e.side]},rightRegion:function(e){return null==e.edge?n.bottomSite:e.edge.region[Rs[e.side]]}},r={bisect:function(e,t){var n={region:{l:e,r:t},ep:{l:null,r:null}},i=t.x-e.x,r=t.y-e.y,a=i>0?i:-i,o=r>0?r:-r;return n.c=e.x*i+e.y*r+.5*(i*i+r*r),a>o?(n.a=1,n.b=r/i,n.c/=i):(n.b=1,n.a=i/r,n.c/=r),n},intersect:function(e,t){var n=e.edge,i=t.edge;if(!n||!i||n.region.r==i.region.r)return null;var r=n.a*i.b-n.b*i.a;if(1e-10>Math.abs(r))return null;var a,o,s=(n.c*i.b-i.c*n.b)/r,l=(i.c*n.a-n.c*i.a)/r,u=n.region.r,c=i.region.r;u.y<c.y||u.y==c.y&&u.x<c.x?(a=e,o=n):(a=t,o=i);var h=s>=o.region.r.x;return h&&"l"===a.side||!h&&"r"===a.side?null:{x:s,y:l}},rightOf:function(e,t){var n=e.edge,i=n.region.r,r=t.x>i.x;if(r&&"l"===e.side)return 1;if(!r&&"r"===e.side)return 0;if(1===n.a){var a=t.y-i.y,o=t.x-i.x,s=0,l=0;if(!r&&0>n.b||r&&n.b>=0?l=s=a>=n.b*o:(l=t.x+t.y*n.b>n.c,0>n.b&&(l=!l),l||(s=1)),!s){var u=i.x-n.region.l.x;l=n.b*(o*o-a*a)<u*a*(1+2*o/u+n.b*n.b),0>n.b&&(l=!l)}}else{var c=n.c-n.a*t.x,h=t.y-c,d=t.x-i.x,f=c-i.y;l=h*h>d*d+f*f}return"l"===e.side?l:!l},endPoint:function(e,n,i){e.ep[n]=i,e.ep[Rs[n]]&&t(e)},distance:function(e,t){var n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}},a={list:[],insert:function(e,t,n){e.vertex=t,e.ystar=t.y+n;for(var i=0,r=a.list,o=r.length;o>i;i++){var s=r[i];if(!(e.ystar>s.ystar||e.ystar==s.ystar&&t.x>s.vertex.x))break}r.splice(i,0,e)},del:function(e){for(var t=0,n=a.list,i=n.length;i>t&&n[t]!=e;++t);n.splice(t,1)},empty:function(){return 0===a.list.length},nextEvent:function(e){for(var t=0,n=a.list,i=n.length;i>t;++t)if(n[t]==e)return n[t+1];return null},min:function(){var e=a.list[0];return{x:e.vertex.x,y:e.ystar}},extractMin:function(){return a.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var o,s,l,u,c,h,d,f,p,m,g,v,b,y=n.list.shift();;)if(a.empty()||(o=a.min()),y&&(a.empty()||y.y<o.y||y.y==o.y&&y.x<o.x))s=i.leftBound(y),l=i.right(s),d=i.rightRegion(s),v=r.bisect(d,y),h=i.createHalfEdge(v,"l"),i.insert(s,h),m=r.intersect(s,h),m&&(a.del(s),a.insert(s,m,r.distance(m,y))),s=h,h=i.createHalfEdge(v,"r"),i.insert(s,h),m=r.intersect(h,l),m&&a.insert(h,m,r.distance(m,y)),y=n.list.shift();else{if(a.empty())break;s=a.extractMin(),u=i.left(s),l=i.right(s),c=i.right(l),d=i.leftRegion(s),f=i.rightRegion(l),g=s.vertex,r.endPoint(s.edge,s.side,g),r.endPoint(l.edge,l.side,g),i.del(s),a.del(l),i.del(l),b="l",d.y>f.y&&(p=d,d=f,f=p,b="r"),v=r.bisect(d,f),h=i.createHalfEdge(v,b),i.insert(u,h),r.endPoint(v,Rs[b],g),m=r.intersect(u,h),m&&(a.del(u),a.insert(u,m,r.distance(m,d))),m=r.intersect(h,c),m&&a.insert(h,m,r.distance(m,d))}for(s=i.right(i.leftEnd);s!=i.rightEnd;s=i.right(s))t(s.edge)}function oi(e){return e.x}function si(e){return e.y}function li(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ui(e,t,n,i,r,a){if(!e(t,n,i,r,a)){var o=.5*(n+r),s=.5*(i+a),l=t.nodes;l[0]&&ui(e,l[0],n,i,o,s),l[1]&&ui(e,l[1],o,i,r,s),l[2]&&ui(e,l[2],n,s,o,a),l[3]&&ui(e,l[3],o,s,r,a)}}function ci(e,t){e=oo.rgb(e),t=oo.rgb(t);var n=e.r,i=e.g,r=e.b,a=t.r-n,o=t.g-i,s=t.b-r;return function(e){return"#"+it(Math.round(n+a*e))+it(Math.round(i+o*e))+it(Math.round(r+s*e))}}function hi(e){var t=[e.a,e.b],n=[e.c,e.d],i=fi(t),r=di(t,n),a=fi(pi(n,t,-r))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Fo,this.translate=[e.e,e.f],this.scale=[i,a],this.skew=a?Math.atan2(r,a)*Fo:0}function di(e,t){return e[0]*t[0]+e[1]*t[1]}function fi(e){var t=Math.sqrt(di(e,e));return t&&(e[0]/=t,e[1]/=t),t}function pi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function mi(e,t){return t-=e=+e,function(n){return e+t*n}}function gi(e,t){var n,i=[],r=[],a=oo.transform(e),o=oo.transform(t),s=a.translate,l=o.translate,u=a.rotate,c=o.rotate,h=a.skew,d=o.skew,f=a.scale,p=o.scale;return s[0]!=l[0]||s[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:mi(s[0],l[0])},{i:3,x:mi(s[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:mi(u,c)})):c&&i.push(i.pop()+"rotate("+c+")"),h!=d?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:mi(h,d)}):d&&i.push(i.pop()+"skewX("+d+")"),f[0]!=p[0]||f[1]!=p[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:mi(f[0],p[0])},{i:n-2,x:mi(f[1],p[1])})):(1!=p[0]||1!=p[1])&&i.push(i.pop()+"scale("+p+")"),n=r.length,function(e){for(var t,a=-1;n>++a;)i[(t=r[a]).i]=t.x(e);return i.join("")}}function vi(e,t){var n,i={},r={};for(n in e)n in t?i[n]=xi(n)(e[n],t[n]):r[n]=e[n];for(n in t)n in e||(r[n]=t[n]);return function(e){for(n in i)r[n]=i[n](e);return r}}function bi(e,t){var n,i,r,a,o,s=0,l=0,u=[],c=[];for(e+="",t+="",Bs.lastIndex=0,i=0;n=Bs.exec(t);++i)n.index&&u.push(t.substring(s,l=n.index)),c.push({i:u.length,x:n[0]}),u.push(null),s=Bs.lastIndex;for(t.length>s&&u.push(t.substring(s)),i=0,a=c.length;(n=Bs.exec(e))&&a>i;++i)if(o=c[i],o.x==n[0]){if(o.i)if(null==u[o.i+1])for(u[o.i-1]+=o.x,u.splice(o.i,1),r=i+1;a>r;++r)c[r].i--;else for(u[o.i-1]+=o.x+u[o.i+1],u.splice(o.i,2),r=i+1;a>r;++r)c[r].i-=2;else if(null==u[o.i+1])u[o.i]=o.x;else for(u[o.i]=o.x+u[o.i+1],u.splice(o.i+1,1),r=i+1;a>r;++r)c[r].i--;c.splice(i,1),a--,i--}else o.x=mi(parseFloat(n[0]),parseFloat(o.x));for(;a>i;)o=c.pop(),null==u[o.i+1]?u[o.i]=o.x:(u[o.i]=o.x+u[o.i+1],u.splice(o.i+1,1)),a--;return 1===u.length?null==u[0]?(o=c[0].x,function(e){return o(e)+""}):function(){return t}:function(e){for(i=0;a>i;++i)u[(o=c[i]).i]=o.x(e);return u.join("")}}function yi(e,t){for(var n,i=oo.interpolators.length;--i>=0&&!(n=oo.interpolators[i](e,t)););return n}function xi(e){return"transform"==e?gi:yi}function wi(e,t){var n,i=[],r=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)i.push(yi(e[n],t[n]));for(;a>n;++n)r[n]=e[n];for(;o>n;++n)r[n]=t[n];return function(e){for(n=0;s>n;++n)r[n]=i[n](e);return r}}function _i(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Ci(e){return function(t){return 1-e(1-t)}}function Ti(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function ki(e){return e*e}function Ei(e){return e*e*e}function Di(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Si(e){return function(t){return Math.pow(t,e)}}function Mi(e){return 1-Math.cos(e*Lo/2)}function ji(e){return Math.pow(2,10*(e-1))}function Ni(e){return 1-Math.sqrt(1-e*e)}function Pi(e,t){var n;return 2>arguments.length&&(t=.45),arguments.length?n=t/(2*Lo)*Math.asin(1/e):(e=1,n=t/4),function(i){return 1+e*Math.pow(2,10*-i)*Math.sin(2*(i-n)*Lo/t)}}function Ai(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function qi(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Li(e,t){e=oo.hcl(e),t=oo.hcl(t);var n=e.h,i=e.c,r=e.l,a=t.h-n,o=t.c-i,s=t.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?t.c:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return V(n+a*e,i+o*e,r+s*e)+""}}function Hi(e,t){e=oo.hsl(e),t=oo.hsl(t);var n=e.h,i=e.s,r=e.l,a=t.h-n,o=t.s-i,s=t.l-r;return isNaN(o)&&(o=0,i=isNaN(i)?t.s:i),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return F(n+a*e,i+o*e,r+s*e)+""}}function Oi(e,t){e=oo.lab(e),t=oo.lab(t);var n=e.l,i=e.a,r=e.b,a=t.l-n,o=t.a-i,s=t.b-r;return function(e){return K(n+a*e,i+o*e,r+s*e)+""}}function Fi(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Ri(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function Ii(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function Bi(e){for(var t=e.source,n=e.target,i=Wi(t,n),r=[t];t!==i;)t=t.parent,r.push(t);for(var a=r.length;n!==i;)r.splice(a,0,n),n=n.parent;return r}function zi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Wi(e,t){if(e===t)return e;for(var n=zi(e),i=zi(t),r=n.pop(),a=i.pop(),o=null;r===a;)o=r,r=n.pop(),a=i.pop();return o}function Ui(e){e.fixed|=2}function $i(e){e.fixed&=-7}function Gi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Vi(e){e.fixed&=-5}function Xi(e,t,n){var i=0,r=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;s>++l;)a=o[l],null!=a&&(Xi(a,t,n),e.charge+=a.charge,i+=a.charge*a.cx,r+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,i+=u*e.point.x,r+=u*e.point.y}e.cx=i/e.charge,e.cy=r/e.charge}function Yi(e,t){return oo.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Zi,e}function Ki(e){return e.children}function Qi(e){return e.value}function Ji(e,t){return t.value-e.value}function Zi(e){return oo.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function er(e){return e.x}function tr(e){return e.y}function nr(e,t,n){e.y0=t,e.y=n}function ir(e){return oo.range(e.length)}function rr(e){for(var t=-1,n=e[0].length,i=[];n>++t;)i[t]=0;return i}function ar(e){for(var t,n=1,i=0,r=e[0][1],a=e.length;a>n;++n)(t=e[n][1])>r&&(i=n,r=t);return i}function or(e){return e.reduce(sr,0)}function sr(e,t){return e+t[1]}function lr(e,t){return ur(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ur(e,t){for(var n=-1,i=+e[0],r=(e[1]-i)/t,a=[];t>=++n;)a[n]=r*n+i;return a}function cr(e){return[oo.min(e),oo.max(e)]}function hr(e,t){return e.parent==t.parent?1:2}function dr(e){var t=e.children;return t&&t.length?t[0]:e._tree.thread}function fr(e){var t,n=e.children;return n&&(t=n.length)?n[t-1]:e._tree.thread}function pr(e,t){var n=e.children;if(n&&(r=n.length))for(var i,r,a=-1;r>++a;)t(i=pr(n[a],t),e)>0&&(e=i);return e}function mr(e,t){return e.x-t.x}function gr(e,t){return t.x-e.x}function vr(e,t){return e.depth-t.depth}function br(e,t){function n(e,i){var r=e.children;if(r&&(o=r.length))for(var a,o,s=null,l=-1;o>++l;)a=r[l],n(a,s),s=a;t(e,i)}n(e,null)}function yr(e){for(var t,n=0,i=0,r=e.children,a=r.length;--a>=0;)t=r[a]._tree,t.prelim+=n,t.mod+=n,n+=t.shift+(i+=t.change)}function xr(e,t,n){e=e._tree,t=t._tree;var i=n/(t.number-e.number);e.change+=i,t.change-=i,t.shift+=n,t.prelim+=n,t.mod+=n}function wr(e,t,n){return e._tree.ancestor.parent==t.parent?e._tree.ancestor:n}function _r(e,t){return e.value-t.value}function Cr(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Tr(e,t){e._pack_next=t,t._pack_prev=e}function kr(e,t){var n=t.x-e.x,i=t.y-e.y,r=e.r+t.r;return r*r-n*n-i*i>.001}function Er(e){function t(e){c=Math.min(e.x-e.r,c),h=Math.max(e.x+e.r,h),d=Math.min(e.y-e.r,d),f=Math.max(e.y+e.r,f)}if((n=e.children)&&(u=n.length)){var n,i,r,a,o,s,l,u,c=1/0,h=-1/0,d=1/0,f=-1/0;if(n.forEach(Dr),i=n[0],i.x=-i.r,i.y=0,t(i),u>1&&(r=n[1],r.x=r.r,r.y=0,t(r),u>2))for(a=n[2],jr(i,r,a),t(a),Cr(i,a),i._pack_prev=a,Cr(a,r),r=i._pack_next,o=3;u>o;o++){jr(i,r,a=n[o]);var p=0,m=1,g=1;for(s=r._pack_next;s!==r;s=s._pack_next,m++)if(kr(s,a)){p=1;break}if(1==p)for(l=i._pack_prev;l!==s._pack_prev&&!kr(l,a);l=l._pack_prev,g++);p?(g>m||m==g&&r.r<i.r?Tr(i,r=s):Tr(i=l,r),o--):(Cr(i,a),r=a,t(a))}var v=(c+h)/2,b=(d+f)/2,y=0;for(o=0;u>o;o++)a=n[o],a.x-=v,a.y-=b,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=y,n.forEach(Sr)}}function Dr(e){e._pack_next=e._pack_prev=e}function Sr(e){delete e._pack_next,delete e._pack_prev}function Mr(e,t,n,i){var r=e.children;if(e.x=t+=i*e.x,e.y=n+=i*e.y,e.r*=i,r)for(var a=-1,o=r.length;o>++a;)Mr(r[a],t,n,i)}function jr(e,t,n){var i=e.r+n.r,r=t.x-e.x,a=t.y-e.y;if(i&&(r||a)){var o=t.r+n.r,s=r*r+a*a;o*=o,i*=i;var l=.5+(i-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(i+s)-(i-=s)*i-o*o))/(2*s);n.x=e.x+l*r+u*a,n.y=e.y+l*a-u*r}else n.x=e.x+i,n.y=e.y}function Nr(e){return 1+oo.max(e,function(e){return e.y})}function Pr(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Ar(e){var t=e.children;return t&&t.length?Ar(t[0]):e}function qr(e){var t,n=e.children;return n&&(t=n.length)?qr(n[t-1]):e}function Lr(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Hr(e,t){var n=e.x+t[3],i=e.y+t[0],r=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>r&&(n+=r/2,r=0),0>a&&(i+=a/2,a=0),{x:n,y:i,dx:r,dy:a}}function Or(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Fr(e){return e.rangeExtent?e.rangeExtent():Or(e.range())}function Rr(e,t,n,i){var r=n(e[0],e[1]),a=i(t[0],t[1]);return function(e){return a(r(e))}}function Ir(e,t){var n,i=0,r=e.length-1,a=e[i],o=e[r];return a>o&&(n=i,i=r,r=n,n=a,a=o,o=n),(t=t(o-a))&&(e[i]=t.floor(a),e[r]=t.ceil(o)),e}function Br(e,t,n,i){var r=[],a=[],o=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());s>=++o;)r.push(n(e[o-1],e[o])),a.push(i(t[o-1],t[o]));return function(t){var n=oo.bisect(e,t,1,s)-1;return a[n](r[n](t))}}function zr(e,t,n,i){function r(){var r=Math.min(e.length,t.length)>2?Br:Rr,l=i?Ii:Ri;return o=r(e,t,l,n),s=r(t,e,l,yi),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),r()):e},a.range=function(e){return arguments.length?(t=e,r()):t},a.rangeRound=function(e){return a.range(e).interpolate(Fi)},a.clamp=function(e){return arguments.length?(i=e,r()):i},a.interpolate=function(e){return arguments.length?(n=e,r()):n},a.ticks=function(t){return Gr(e,t)},a.tickFormat=function(t,n){return Vr(e,t,n)},a.nice=function(){return Ir(e,Ur),r()},a.copy=function(){return zr(e,t,n,i)},r()}function Wr(e,t){return oo.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Ur(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),e&&{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function $r(e,t){var n=Or(e),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),a=t/i*r;return.15>=a?r*=10:.35>=a?r*=5:.75>=a&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function Gr(e,t){return oo.range.apply(oo,$r(e,t))}function Vr(e,t,n){var i=-Math.floor(Math.log($r(e,t)[2])/Math.LN10+.01);return oo.format(n?n.replace(ns,function(e,t,n,r,a,o,s,l,u,c){return[t,n,r,a,o,s,l,u||"."+(i-2*("%"===c)),c].join("")}):",."+i+"f")}function Xr(e,t,n,i,r){function a(t){return e(n(t))}function o(){return n===Yr?{floor:s,ceil:l}:{floor:function(e){return-l(-e)},ceil:function(e){return-s(-e)}}}function s(e){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}function l(e){return Math.pow(t,Math.ceil(Math.log(e)/Math.log(t)))}return a.invert=function(t){return i(e.invert(t))},a.domain=function(t){return arguments.length?(0>t[0]?(n=Qr,i=Jr):(n=Yr,i=Kr),e.domain((r=t.map(Number)).map(n)),a):r},a.base=function(e){return arguments.length?(t=+e,a):t},a.nice=function(){return e.domain(Ir(r,o).map(n)),a},a.ticks=function(){var r=Or(e.domain()),a=[];if(r.every(isFinite)){var o=Math.log(t),s=Math.floor(r[0]/o),l=Math.ceil(r[1]/o),u=i(r[0]),c=i(r[1]),h=t%1?2:t;if(n===Qr)for(a.push(-Math.pow(t,-s));l>s++;)for(var d=h-1;d>0;d--)a.push(-Math.pow(t,-s)*d);else{for(;l>s;s++)for(var d=1;h>d;d++)a.push(Math.pow(t,s)*d);a.push(Math.pow(t,s))}for(s=0;u>a[s];s++);for(l=a.length;a[l-1]>c;l--);a=a.slice(s,l)}return a},a.tickFormat=function(e,r){if(2>arguments.length&&(r=Ks),!arguments.length)return r;var o,s=Math.log(t),l=Math.max(.1,e/a.ticks().length),u=n===Qr?(o=-1e-12,Math.floor):(o=1e-12,Math.ceil);return function(e){return l>=e/i(s*u(n(e)/s+o))?r(e):""}},a.copy=function(){return Xr(e.copy(),t,n,i,r)},Wr(a,e)}function Yr(e){return Math.log(0>e?0:e)}function Kr(e){return Math.exp(e)}function Qr(e){return-Math.log(e>0?0:-e)}function Jr(e){return-Math.exp(-e)}function Zr(e,t,n){function i(t){return e(r(t))}var r=ea(t),a=ea(1/t);return i.invert=function(t){return a(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(r)),i):n},i.ticks=function(e){return Gr(n,e)},i.tickFormat=function(e,t){return Vr(n,e,t)},i.nice=function(){return i.domain(Ir(n,Ur))},i.exponent=function(o){return arguments.length?(r=ea(t=o),a=ea(1/t),e.domain(n.map(r)),i):t},i.copy=function(){return Zr(e.copy(),t,n)},Wr(i,e)}function ea(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ta(e,t){function n(t){return o[((a.get(t)||a.set(t,e.push(t)))-1)%o.length]}function i(t,n){return oo.range(e.length).map(function(e){return t+n*e})}var a,o,s;return n.domain=function(i){if(!arguments.length)return e;e=[],a=new r;for(var o,s=-1,l=i.length;l>++s;)a.has(o=i[s])||a.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(o=e,s=0,t={t:"range",a:arguments},n):o},n.rangePoints=function(r,a){2>arguments.length&&(a=0);var l=r[0],u=r[1],c=(u-l)/(Math.max(1,e.length-1)+a);return o=i(2>e.length?(l+u)/2:l+c*a/2,c),s=0,t={t:"rangePoints",a:arguments},n},n.rangeBands=function(r,a,l){2>arguments.length&&(a=0),3>arguments.length&&(l=a);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=(h-c)/(e.length-a+2*l);return o=i(c+d*l,d),u&&o.reverse(),s=d*(1-a),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,a,l){2>arguments.length&&(a=0),3>arguments.length&&(l=a);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=Math.floor((h-c)/(e.length-a+2*l)),f=h-c-(e.length-a)*d;return o=i(c+Math.round(f/2),d),u&&o.reverse(),s=Math.round(d*(1-a)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return s},n.rangeExtent=function(){return Or(t.a[0])},n.copy=function(){return ta(e,t)},n.domain(e)}function na(e,t){function n(){var n=0,a=t.length;for(r=[];a>++n;)r[n-1]=oo.quantile(e,n/a);return i}function i(e){return isNaN(e=+e)?0/0:t[oo.bisect(r,e)]}var r;return i.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(oo.ascending),n()):e},i.range=function(e){return arguments.length?(t=e,n()):t},i.quantiles=function(){return r},i.copy=function(){return na(e,t)},n()}function ia(e,t,n){function i(t){return n[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function r(){return a=n.length/(t-e),o=n.length-1,i}var a,o;return i.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],r()):[e,t]},i.range=function(e){return arguments.length?(n=e,r()):n},i.copy=function(){return ia(e,t,n)},r()}function ra(e,t){function n(n){return t[oo.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return ra(e,t)},n}function aa(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Gr(e,t)},t.tickFormat=function(t,n){return Vr(e,t,n)},t.copy=function(){return aa(e)},t}function oa(e){return e.innerRadius}function sa(e){return e.outerRadius}function la(e){return e.startAngle}function ua(e){return e.endAngle}function ca(e){for(var t,n,i,r=-1,a=e.length;a>++r;)t=e[r],n=t[0],i=t[1]+tl,t[0]=n*Math.cos(i),t[1]=n*Math.sin(i);return e}function ha(e){function t(t){function l(){m.push("M",s(e(v),h),c,u(e(g.reverse()),h),"Z")}for(var d,f,p,m=[],g=[],v=[],b=-1,y=t.length,x=ut(n),w=ut(r),_=n===i?function(){return f}:ut(i),C=r===a?function(){return p}:ut(a);y>++b;)o.call(this,d=t[b],b)?(g.push([f=+x.call(this,d,b),p=+w.call(this,d,b)]),v.push([+_.call(this,d,b),+C.call(this,d,b)])):g.length&&(l(),g=[],v=[]);return g.length&&l(),m.length?m.join(""):null}var n=Ln,i=Ln,r=0,a=Hn,o=Ot,s=On,l=s.key,u=s,c="L",h=.7;return t.x=function(e){return arguments.length?(n=i=e,t):i},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(r=a=e,t):a},t.y0=function(e){return arguments.length?(r=e,t):r},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Ls.get(e)||On).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(h=e,t):h},t}function da(e){return e.radius}function fa(e){return[e.x,e.y]}function pa(e){return function(){var t=e.apply(this,arguments),n=t[0],i=t[1]+tl;return[n*Math.cos(i),n*Math.sin(i)]}}function ma(){return 64}function ga(){return"circle"}function va(e){var t=Math.sqrt(e/Lo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function ba(e,t){return yo(e,sl),e.id=t,e}function ya(e,t,n,i){var r=e.id;return A(e,"function"==typeof n?function(e,a,o){e.__transition__[r].tween.set(t,i(n.call(e,e.__data__,a,o)))}:(n=i(n),function(e){e.__transition__[r].tween.set(t,n)}))}function xa(e){return null==e&&(e=""),function(){this.textContent=e}}function wa(e,t,n,i){var a=e.__transition__||(e.__transition__={active:0,count:0}),o=a[n];if(!o){var s=i.time;return o=a[n]={tween:new r,event:oo.dispatch("start","end"),time:s,ease:i.ease,delay:i.delay,duration:i.duration},++a.count,oo.timer(function(i){function r(i){return a.active>n?u():(a.active=n,d.start.call(e,c,t),o.tween.forEach(function(n,i){(i=i.call(e,c,t))&&m.push(i)}),l(i)||oo.timer(l,0,s),1)}function l(i){if(a.active!==n)return u();for(var r=(i-f)/p,o=h(r),s=m.length;s>0;)m[--s].call(e,o);return r>=1?(u(),d.end.call(e,c,t),1):void 0}function u(){return--a.count?delete a[n]:delete e.__transition__,1}var c=e.__data__,h=o.ease,d=o.event,f=o.delay,p=o.duration,m=[];return i>=f?r(i):oo.timer(r,f,s),1},0,s),o}}function _a(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Ca(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function Ta(e,t,n){if(i=[],n&&t.length>1){for(var i,r,a,o=Or(e.domain()),s=-1,l=t.length,u=(t[1]-t[0])/++n;l>++s;)for(r=n;--r>0;)(a=+t[s]-r*u)>=o[0]&&i.push(a);for(--s,r=0;n>++r&&(a=+t[s]+r*u)<o[1];)i.push(a)}return i}function ka(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ea(e,t,n){function i(t){var n=e(t),i=a(n,1);return i-t>t-n?n:i}function r(n){return t(n=e(new pl(n-1)),1),n}function a(e,n){return t(e=new pl(+e),n),e}function o(e,i,a){var o=r(e),s=[];if(a>1)for(;i>o;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;i>o;)s.push(new Date(+o)),t(o,1);return s}function s(e,t,n){try{pl=ka;var i=new ka;return i._=e,o(i,t,n)}finally{pl=Date}}e.floor=e,e.round=i,e.ceil=r,e.offset=a,e.range=o;var l=e.utc=Da(e);return l.floor=l,l.round=Da(i),l.ceil=Da(r),l.offset=Da(a),l.range=s,e}function Da(e){return function(t,n){try{pl=ka;var i=new ka;return i._=t,e(i,n)._}finally{pl=Date}}}function Sa(e,t,n,i){for(var r,a,o=0,s=t.length,l=n.length;s>o;){if(i>=l)return-1;if(r=t.charCodeAt(o++),37===r){if(a=Pl[t.charAt(o++)],!a||0>(i=a(e,n,i)))return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function Ma(e){return RegExp("^(?:"+e.map(oo.requote).join("|")+")","i")}function ja(e){for(var t=new r,n=-1,i=e.length;i>++n;)t.set(e[n].toLowerCase(),n);return t}function Na(e,t,n){e+="";var i=e.length;return n>i?Array(n-i+1).join(t)+e:e}function Pa(e,t,n){kl.lastIndex=0;var i=kl.exec(t.substring(n));return i?n+=i[0].length:-1}function Aa(e,t,n){Tl.lastIndex=0;var i=Tl.exec(t.substring(n));return i?n+=i[0].length:-1}function qa(e,t,n){Sl.lastIndex=0;var i=Sl.exec(t.substring(n));return i?(e.m=Ml.get(i[0].toLowerCase()),n+=i[0].length):-1}function La(e,t,n){El.lastIndex=0;var i=El.exec(t.substring(n));return i?(e.m=Dl.get(i[0].toLowerCase()),n+=i[0].length):-1}function Ha(e,t,n){return Sa(e,""+Nl.c,t,n)}function Oa(e,t,n){return Sa(e,""+Nl.x,t,n)}function Fa(e,t,n){return Sa(e,""+Nl.X,t,n)}function Ra(e,t,n){Al.lastIndex=0;var i=Al.exec(t.substring(n,n+4));return i?(e.y=+i[0],n+=i[0].length):-1}function Ia(e,t,n){Al.lastIndex=0;var i=Al.exec(t.substring(n,n+2));return i?(e.y=Ba(+i[0]),n+=i[0].length):-1}function Ba(e){return e+(e>68?1900:2e3)}function za(e,t,n){Al.lastIndex=0;var i=Al.exec(t.substring(n,n+2));return i?(e.m=i[0]-1,n+=i[0].length):-1}function Wa(e,t,n){Al.lastIndex=0;var i=Al.exec(t.substring(n,n+2));return i?(e.d=+i[0],n+=i[0].length):-1}function Ua(e,t,n){Al.lastIndex=0;var i=Al.exec(t.substring(n,n+2));return i?(e.H=+i[0],n+=i[0].length):-1}function $a(e,t,n){Al.lastIndex=0;var i=Al.exec(t.substring(n,n+2));return i?(e.M=+i[0],n+=i[0].length):-1}function Ga(e,t,n){Al.lastIndex=0;var i=Al.exec(t.substring(n,n+2));return i?(e.S=+i[0],n+=i[0].length):-1}function Va(e,t,n){Al.lastIndex=0;var i=Al.exec(t.substring(n,n+3));return i?(e.L=+i[0],n+=i[0].length):-1}function Xa(e,t,n){var i=ql.get(t.substring(n,n+=2).toLowerCase());return null==i?-1:(e.p=i,n)}function Ya(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",i=~~(Math.abs(t)/60),r=Math.abs(t)%60;return n+Na(i,"0",2)+Na(r,"0",2)}function Ka(e){return e.toISOString()}function Qa(e,t,n){function i(t){return e(t)}return i.invert=function(t){return Ja(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Ja)},i.nice=function(e){return i.domain(Ir(i.domain(),function(){return e}))},i.ticks=function(n,r){var a=Or(i.domain());if("function"!=typeof n){var o=a[1]-a[0],s=o/n,l=oo.bisect(Hl,s);if(l==Hl.length)return t.year(a,n);if(!l)return e.ticks(n).map(Ja);Math.log(s/Hl[l-1])<Math.log(Hl[l]/s)&&--l,n=t[l],r=n[1],n=n[0].range}return n(a[0],new Date(+a[1]+1),r)},i.tickFormat=function(){return n},i.copy=function(){return Qa(e.copy(),t,n)},Wr(i,e)}function Ja(e){return new Date(e)}function Za(e){return function(t){for(var n=e.length-1,i=e[n];!i[1](t);)i=e[--n];return i[0](t)}}function eo(e){var t=new Date(e,0,1);return t.setFullYear(e),t}function to(e){var t=e.getFullYear(),n=eo(t),i=eo(t+1);return t+(e-n)/(i-n)}function no(e){var t=new Date(Date.UTC(e,0,1));return t.setUTCFullYear(e),t}function io(e){var t=e.getUTCFullYear(),n=no(t),i=no(t+1);return t+(e-n)/(i-n)}function ro(e){return JSON.parse(e.responseText)}function ao(e){var t=so.createRange();return t.selectNode(so.body),t.createContextualFragment(e.responseText)}var oo={version:"3.1.10"};Date.now||(Date.now=function(){return+new Date});var so=document,lo=window;try{so.createElement("div").style.setProperty("opacity",0,"")}catch(uo){var co=lo.CSSStyleDeclaration.prototype,ho=co.setProperty;co.setProperty=function(e,t,n){ho.call(this,e,t+"",n)}}oo.ascending=function(e,t){return t>e?-1:e>t?1:e>=t?0:0/0},oo.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},oo.min=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;a>++r&&(null==(n=e[r])||n!=n);)n=void 0;for(;a>++r;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;a>++r&&(null==(n=t.call(e,e[r],r))||n!=n);)n=void 0;for(;a>++r;)null!=(i=t.call(e,e[r],r))&&n>i&&(n=i)}return n},oo.max=function(e,t){var n,i,r=-1,a=e.length;if(1===arguments.length){for(;a>++r&&(null==(n=e[r])||n!=n);)n=void 0;for(;a>++r;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;a>++r&&(null==(n=t.call(e,e[r],r))||n!=n);)n=void 0;for(;a>++r;)null!=(i=t.call(e,e[r],r))&&i>n&&(n=i)}return n},oo.extent=function(e,t){var n,i,r,a=-1,o=e.length;if(1===arguments.length){for(;o>++a&&(null==(n=r=e[a])||n!=n);)n=r=void 0;for(;o>++a;)null!=(i=e[a])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;o>++a&&(null==(n=r=t.call(e,e[a],a))||n!=n);)n=void 0;for(;o>++a;)null!=(i=t.call(e,e[a],a))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},oo.sum=function(e,t){var n,i=0,r=e.length,a=-1;if(1===arguments.length)for(;r>++a;)isNaN(n=+e[a])||(i+=n);else for(;r>++a;)isNaN(n=+t.call(e,e[a],a))||(i+=n);return i},oo.mean=function(t,n){var i,r=t.length,a=0,o=-1,s=0;if(1===arguments.length)for(;r>++o;)e(i=t[o])&&(a+=(i-a)/++s);else for(;r>++o;)e(i=n.call(t,t[o],o))&&(a+=(i-a)/++s);return s?a:void 0},oo.quantile=function(e,t){var n=(e.length-1)*t+1,i=Math.floor(n),r=+e[i-1],a=n-i;return a?r+a*(e[i]-r):r},oo.median=function(t,n){return arguments.length>1&&(t=t.map(n)),t=t.filter(e),t.length?oo.quantile(t.sort(oo.ascending),.5):void 0},oo.bisector=function(e){return{left:function(t,n,i,r){for(3>arguments.length&&(i=0),4>arguments.length&&(r=t.length);r>i;){var a=i+r>>>1;n>e.call(t,t[a],a)?i=a+1:r=a}return i},right:function(t,n,i,r){for(3>arguments.length&&(i=0),4>arguments.length&&(r=t.length);r>i;){var a=i+r>>>1;e.call(t,t[a],a)>n?r=a:i=a+1}return i}}};var fo=oo.bisector(function(e){return e});oo.bisectLeft=fo.left,oo.bisect=oo.bisectRight=fo.right,oo.shuffle=function(e){for(var t,n,i=e.length;i;)n=0|Math.random()*i--,t=e[i],e[i]=e[n],e[n]=t;return e},oo.permute=function(e,t){for(var n=[],i=-1,r=t.length;r>++i;)n[i]=e[t[i]];return n},oo.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,n=oo.min(arguments,t),i=Array(n);n>++e;)for(var r,a=-1,o=i[e]=Array(r);r>++a;)o[a]=arguments[a][e];return i},oo.transpose=function(e){return oo.zip.apply(oo,e)},oo.keys=function(e){var t=[];for(var n in e)t.push(n);return t},oo.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},oo.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},oo.merge=function(e){return Array.prototype.concat.apply([],e)},oo.range=function(e,t,i){if(3>arguments.length&&(i=1,2>arguments.length&&(t=e,e=0)),1/0===(t-e)/i)throw Error("infinite range");var r,a=[],o=n(Math.abs(i)),s=-1;if(e*=o,t*=o,i*=o,0>i)for(;(r=e+i*++s)>t;)a.push(r/o);else for(;t>(r=e+i*++s);)a.push(r/o);return a},oo.map=function(e){var t=new r;for(var n in e)t.set(n,e[n]);return t},i(r,{has:function(e){return po+e in this},get:function(e){return this[po+e]},set:function(e,t){return this[po+e]=t},remove:function(e){return e=po+e,e in this&&delete this[e]},keys:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===mo&&e.call(this,t.substring(1),this[t])}});var po="\0",mo=po.charCodeAt(0);oo.nest=function(){function e(t,s,l){if(l>=o.length)return i?i.call(a,s):n?s.sort(n):s;for(var u,c,h,d,f=-1,p=s.length,m=o[l++],g=new r;p>++f;)(d=g.get(u=m(c=s[f])))?d.push(c):g.set(u,[c]);return t?(c=t(),h=function(n,i){c.set(n,e(t,i,l))}):(c={},h=function(n,i){c[n]=e(t,i,l)}),g.forEach(h),c}function t(e,n){if(n>=o.length)return e;var i=[],r=s[n++];return e.forEach(function(e,r){i.push({key:e,values:t(r,n)})}),r?i.sort(function(e,t){return r(e.key,t.key)}):i}var n,i,a={},o=[],s=[];return a.map=function(t,n){return e(n,t,0)},a.entries=function(n){return t(e(oo.map,n,0),0)},a.key=function(e){return o.push(e),a},a.sortKeys=function(e){return s[o.length-1]=e,a},a.sortValues=function(e){return n=e,a},a.rollup=function(e){return i=e,a},a},oo.set=function(e){var t=new a;if(e)for(var n=0;e.length>n;n++)t.add(e[n]);return t},i(a,{has:function(e){return po+e in this
},add:function(e){return this[po+e]=!0,e},remove:function(e){return e=po+e,e in this&&delete this[e]},values:function(){var e=[];return this.forEach(function(t){e.push(t)}),e},forEach:function(e){for(var t in this)t.charCodeAt(0)===mo&&e.call(this,t.substring(1))}}),oo.behavior={},oo.rebind=function(e,t){for(var n,i=1,r=arguments.length;r>++i;)e[n=arguments[i]]=o(e,t,t[n]);return e},oo.dispatch=function(){for(var e=new s,t=-1,n=arguments.length;n>++t;)e[arguments[t]]=l(e);return e},s.prototype.on=function(e,t){var n=e.indexOf("."),i="";if(n>=0&&(i=e.substring(n+1),e=e.substring(0,n)),e)return 2>arguments.length?this[e].on(i):this[e].on(i,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(i,null);return this}},oo.event=null,oo.mouse=function(e){return f(e,c())};var go=/WebKit/.test(lo.navigator.userAgent)?-1:0,vo=m;try{vo(so.documentElement.childNodes)[0].nodeType}catch(bo){vo=p}var yo=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};oo.touches=function(e,t){return 2>arguments.length&&(t=c().touches),t?vo(t).map(function(t){var n=f(e,t);return n.identifier=t.identifier,n}):[]},oo.behavior.drag=function(){function e(){this.on("mousedown.drag",t).on("touchstart.drag",t)}function t(){function e(){var e=o.parentNode;return null!=c?oo.touches(e).filter(function(e){return e.identifier===c})[0]:oo.mouse(e)}function t(){if(!o.parentNode)return r();var t=e(),n=t[0]-d[0],i=t[1]-d[1];f|=n|i,d=t,u(),s({type:"drag",x:t[0]+a[0],y:t[1]+a[1],dx:n,dy:i})}function r(){s({type:"dragend"}),f&&(u(),oo.event.target===l&&h(p,"click")),p.on(null!=c?"touchmove.drag-"+c:"mousemove.drag",null).on(null!=c?"touchend.drag-"+c:"mouseup.drag",null)}var a,o=this,s=n.of(o,arguments),l=oo.event.target,c=oo.event.touches?oo.event.changedTouches[0].identifier:null,d=e(),f=0,p=oo.select(lo).on(null!=c?"touchmove.drag-"+c:"mousemove.drag",t).on(null!=c?"touchend.drag-"+c:"mouseup.drag",r,!0);i?(a=i.apply(o,arguments),a=[a.x-d[0],a.y-d[1]]):a=[0,0],null==c&&u(),s({type:"dragstart"})}var n=d(e,"drag","dragstart","dragend"),i=null;return e.origin=function(t){return arguments.length?(i=t,e):i},oo.rebind(e,n,"on")};var xo=function(e,t){return t.querySelector(e)},wo=function(e,t){return t.querySelectorAll(e)},_o=so.documentElement,Co=_o.matchesSelector||_o.webkitMatchesSelector||_o.mozMatchesSelector||_o.msMatchesSelector||_o.oMatchesSelector,To=function(e,t){return Co.call(e,t)};"function"==typeof Sizzle&&(xo=function(e,t){return Sizzle(e,t)[0]||null},wo=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},To=Sizzle.matchesSelector),oo.selection=function(){return jo};var ko=oo.selection.prototype=[];ko.select=function(e){var t,n,i,r,a=[];"function"!=typeof e&&(e=v(e));for(var o=-1,s=this.length;s>++o;){a.push(t=[]),t.parentNode=(i=this[o]).parentNode;for(var l=-1,u=i.length;u>++l;)(r=i[l])?(t.push(n=e.call(r,r.__data__,l)),n&&"__data__"in r&&(n.__data__=r.__data__)):t.push(null)}return g(a)},ko.selectAll=function(e){var t,n,i=[];"function"!=typeof e&&(e=b(e));for(var r=-1,a=this.length;a>++r;)for(var o=this[r],s=-1,l=o.length;l>++s;)(n=o[s])&&(i.push(t=vo(e.call(n,n.__data__,s))),t.parentNode=n);return g(i)};var Eo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};oo.ns={prefix:Eo,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),Eo.hasOwnProperty(n)?{space:Eo[n],local:e}:e}},ko.attr=function(e,t){if(2>arguments.length){if("string"==typeof e){var n=this.node();return e=oo.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(y(t,e[t]));return this}return this.each(y(e,t))},oo.requote=function(e){return e.replace(Do,"\\$&")};var Do=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;ko.classed=function(e,t){if(2>arguments.length){if("string"==typeof e){var n=this.node(),i=(e=e.trim().split(/^|\s+/g)).length,r=-1;if(t=n.classList){for(;i>++r;)if(!t.contains(e[r]))return!1}else for(t=n.getAttribute("class");i>++r;)if(!w(e[r]).test(t))return!1;return!0}for(t in e)this.each(_(t,e[t]));return this}return this.each(_(e,t))},ko.style=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t="");for(n in e)this.each(T(n,e[n],t));return this}if(2>i)return lo.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(T(e,t,n))},ko.property=function(e,t){if(2>arguments.length){if("string"==typeof e)return this.node()[e];for(t in e)this.each(k(t,e[t]));return this}return this.each(k(e,t))},ko.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},ko.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},ko.append=function(e){function t(){return this.appendChild(so.createElementNS(this.namespaceURI,e))}function n(){return this.appendChild(so.createElementNS(e.space,e.local))}return e=oo.ns.qualify(e),this.select(e.local?n:t)},ko.insert=function(e,t){function n(n,i){return this.insertBefore(so.createElementNS(this.namespaceURI,e),t.call(this,n,i))}function i(n,i){return this.insertBefore(so.createElementNS(e.space,e.local),t.call(this,n,i))}return e=oo.ns.qualify(e),"function"!=typeof t&&(t=v(t)),this.select(e.local?i:n)},ko.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},ko.data=function(e,t){function n(e,n){var i,a,o,s=e.length,h=n.length,d=Math.min(s,h),f=Array(h),p=Array(h),m=Array(s);if(t){var g,v=new r,b=new r,y=[];for(i=-1;s>++i;)g=t.call(a=e[i],a.__data__,i),v.has(g)?m[i]=a:v.set(g,a),y.push(g);for(i=-1;h>++i;)g=t.call(n,o=n[i],i),(a=v.get(g))?(f[i]=a,a.__data__=o):b.has(g)||(p[i]=E(o)),b.set(g,o),v.remove(g);for(i=-1;s>++i;)v.has(y[i])&&(m[i]=e[i])}else{for(i=-1;d>++i;)a=e[i],o=n[i],a?(a.__data__=o,f[i]=a):p[i]=E(o);for(;h>i;++i)p[i]=E(n[i]);for(;s>i;++i)m[i]=e[i]}p.update=f,p.parentNode=f.parentNode=m.parentNode=e.parentNode,l.push(p),u.push(f),c.push(m)}var i,a,o=-1,s=this.length;if(!arguments.length){for(e=Array(s=(i=this[0]).length);s>++o;)(a=i[o])&&(e[o]=a.__data__);return e}var l=q([]),u=g([]),c=g([]);if("function"==typeof e)for(;s>++o;)n(i=this[o],e.call(i,i.parentNode.__data__,o));else for(;s>++o;)n(i=this[o],e);return u.enter=function(){return l},u.exit=function(){return c},u},ko.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},ko.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=D(e));for(var a=0,o=this.length;o>a;a++){r.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s)&&t.push(i)}return g(r)},ko.order=function(){for(var e=-1,t=this.length;t>++e;)for(var n,i=this[e],r=i.length-1,a=i[r];--r>=0;)(n=i[r])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},ko.sort=function(e){e=S.apply(this,arguments);for(var t=-1,n=this.length;n>++t;)this[t].sort(e);return this.order()},ko.on=function(e,t,n){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(t=!1);for(n in e)this.each(j(n,e[n],t));return this}if(2>i)return(i=this.node()["__on"+e])&&i._;n=!1}return this.each(j(e,t,n))};var So=oo.map({mouseenter:"mouseover",mouseleave:"mouseout"});So.forEach(function(e){"on"+e in so&&So.remove(e)}),ko.each=function(e){return A(this,function(t,n,i){e.call(t,t.__data__,n,i)})},ko.call=function(e){var t=vo(arguments);return e.apply(t[0]=this,t),this},ko.empty=function(){return!this.node()},ko.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],i=0,r=n.length;r>i;i++){var a=n[i];if(a)return a}return null};var Mo=[];oo.selection.enter=q,oo.selection.enter.prototype=Mo,Mo.append=ko.append,Mo.insert=ko.insert,Mo.empty=ko.empty,Mo.node=ko.node,Mo.select=function(e){for(var t,n,i,r,a,o=[],s=-1,l=this.length;l>++s;){i=(r=this[s]).update,o.push(t=[]),t.parentNode=r.parentNode;for(var u=-1,c=r.length;c>++u;)(a=r[u])?(t.push(i[u]=n=e.call(r.parentNode,a.__data__,u)),n.__data__=a.__data__):t.push(null)}return g(o)},ko.transition=function(){var e,t,n=rl||++ll,i=[],r=Object.create(ul);r.time=Date.now();for(var a=-1,o=this.length;o>++a;){i.push(e=[]);for(var s=this[a],l=-1,u=s.length;u>++l;)(t=s[l])&&wa(t,l,n,r),e.push(t)}return ba(i,n)},oo.select=function(e){var t=["string"==typeof e?xo(e,so):e];return t.parentNode=_o,g([t])},oo.selectAll=function(e){var t=vo("string"==typeof e?wo(e,so):e);return t.parentNode=_o,g([t])};var jo=oo.select(_o);oo.behavior.zoom=function(){function e(){this.on("mousedown.zoom",s).on("mousemove.zoom",c).on(Ao+".zoom",l).on("dblclick.zoom",f).on("touchstart.zoom",p).on("touchmove.zoom",m).on("touchend.zoom",p)}function t(e){return[(e[0]-C[0])/T,(e[1]-C[1])/T]}function n(e){return[e[0]*T+C[0],e[1]*T+C[1]]}function i(e){T=Math.max(k[0],Math.min(k[1],e))}function r(e,t){t=n(t),C[0]+=e[0]-t[0],C[1]+=e[1]-t[1]}function a(){y&&y.domain(b.range().map(function(e){return(e-C[0])/T}).map(b.invert)),w&&w.domain(x.range().map(function(e){return(e-C[1])/T}).map(x.invert))}function o(e){a(),oo.event.preventDefault(),e({type:"zoom",scale:T,translate:C})}function s(){function e(){l=1,r(oo.mouse(i),d),o(a)}function n(){l&&u(),c.on("mousemove.zoom",null).on("mouseup.zoom",null),l&&oo.event.target===s&&h(c,"click.zoom")}var i=this,a=E.of(i,arguments),s=oo.event.target,l=0,c=oo.select(lo).on("mousemove.zoom",e).on("mouseup.zoom",n),d=t(oo.mouse(i));lo.focus(),u()}function l(){g||(g=t(oo.mouse(this))),i(Math.pow(2,.002*No())*T),r(oo.mouse(this),g),o(E.of(this,arguments))}function c(){g=null}function f(){var e=oo.mouse(this),n=t(e),a=Math.log(T)/Math.LN2;i(Math.pow(2,oo.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)),r(e,n),o(E.of(this,arguments))}function p(){var e=oo.touches(this),n=Date.now();if(v=T,g={},e.forEach(function(e){g[e.identifier]=t(e)}),u(),1===e.length){if(500>n-_){var a=e[0],s=t(e[0]);i(2*T),r(a,s),o(E.of(this,arguments))}_=n}}function m(){var e=oo.touches(this),t=e[0],n=g[t.identifier];if(a=e[1]){var a,s=g[a.identifier];t=[(t[0]+a[0])/2,(t[1]+a[1])/2],n=[(n[0]+s[0])/2,(n[1]+s[1])/2],i(oo.event.scale*v)}r(t,n),_=null,o(E.of(this,arguments))}var g,v,b,y,x,w,_,C=[0,0],T=1,k=Po,E=d(e,"zoom");return e.translate=function(t){return arguments.length?(C=t.map(Number),a(),e):C},e.scale=function(t){return arguments.length?(T=+t,a(),e):T},e.scaleExtent=function(t){return arguments.length?(k=null==t?Po:t.map(Number),e):k},e.x=function(t){return arguments.length?(y=t,b=t.copy(),C=[0,0],T=1,e):y},e.y=function(t){return arguments.length?(w=t,x=t.copy(),C=[0,0],T=1,e):w},oo.rebind(e,E,"on")};var No,Po=[0,1/0],Ao="onwheel"in so?(No=function(){return-oo.event.deltaY*(oo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in so?(No=function(){return oo.event.wheelDelta},"mousewheel"):(No=function(){return-oo.event.detail},"MozMousePixelScroll");L.prototype.toString=function(){return this.rgb()+""},oo.hsl=function(e,t,n){return 1===arguments.length?e instanceof O?H(e.h,e.s,e.l):rt(""+e,at,H):H(+e,+t,+n)};var qo=O.prototype=new L;qo.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),H(this.h,this.s,this.l/e)},qo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),H(this.h,this.s,e*this.l)},qo.rgb=function(){return F(this.h,this.s,this.l)};var Lo=Math.PI,Ho=1e-6,Oo=Lo/180,Fo=180/Lo;oo.hcl=function(e,t,n){return 1===arguments.length?e instanceof G?$(e.h,e.c,e.l):e instanceof Y?Q(e.l,e.a,e.b):Q((e=ot((e=oo.rgb(e)).r,e.g,e.b)).l,e.a,e.b):$(+e,+t,+n)};var Ro=G.prototype=new L;Ro.brighter=function(e){return $(this.h,this.c,Math.min(100,this.l+Io*(arguments.length?e:1)))},Ro.darker=function(e){return $(this.h,this.c,Math.max(0,this.l-Io*(arguments.length?e:1)))},Ro.rgb=function(){return V(this.h,this.c,this.l).rgb()},oo.lab=function(e,t,n){return 1===arguments.length?e instanceof Y?X(e.l,e.a,e.b):e instanceof G?V(e.l,e.c,e.h):ot((e=oo.rgb(e)).r,e.g,e.b):X(+e,+t,+n)};var Io=18,Bo=.95047,zo=1,Wo=1.08883,Uo=Y.prototype=new L;Uo.brighter=function(e){return X(Math.min(100,this.l+Io*(arguments.length?e:1)),this.a,this.b)},Uo.darker=function(e){return X(Math.max(0,this.l-Io*(arguments.length?e:1)),this.a,this.b)},Uo.rgb=function(){return K(this.l,this.a,this.b)},oo.rgb=function(e,t,n){return 1===arguments.length?e instanceof nt?tt(e.r,e.g,e.b):rt(""+e,tt,F):tt(~~e,~~t,~~n)};var $o=nt.prototype=new L;$o.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,i=this.b,r=30;return t||n||i?(t&&r>t&&(t=r),n&&r>n&&(n=r),i&&r>i&&(i=r),tt(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(i/e)))):tt(r,r,r)},$o.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),tt(Math.floor(e*this.r),Math.floor(e*this.g),Math.floor(e*this.b))},$o.hsl=function(){return at(this.r,this.g,this.b)},$o.toString=function(){return"#"+it(this.r)+it(this.g)+it(this.b)};var Go=oo.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Go.forEach(function(e,t){Go.set(e,rt(t,tt,F))}),oo.functor=ut,oo.xhr=ht(ct),oo.csv=pt(",","text/csv"),oo.tsv=pt("	","text/tab-separated-values");var Vo,Xo,Yo,Ko;oo.timer=function(e,t,n){if(3>arguments.length){if(2>arguments.length)t=0;else if(!isFinite(t))return;n=Date.now()}var i=n+t,r={callback:e,time:i,next:null};Xo?Xo.next=r:Vo=r,Xo=r,Yo||(Ko=clearTimeout(Ko),Yo=1,Qo(mt))},oo.timer.flush=function(){gt(),vt()};var Qo=lo.requestAnimationFrame||lo.webkitRequestAnimationFrame||lo.mozRequestAnimationFrame||lo.oRequestAnimationFrame||lo.msRequestAnimationFrame||function(e){setTimeout(e,17)},Jo=".",Zo=",",es=[3,3],ts=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(bt);oo.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=oo.round(e,yt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),ts[8+n/3]},oo.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)},oo.format=function(e){var t=ns.exec(e),n=t[1]||" ",i=t[2]||">",r=t[3]||"",a=t[4]||"",o=t[5],s=+t[6],l=t[7],u=t[8],c=t[9],h=1,d="",f=!1;switch(u&&(u=+u.substring(1)),(o||"0"===n&&"="===i)&&(o=n="0",i="=",l&&(s-=Math.floor((s-1)/4))),c){case"n":l=!0,c="g";break;case"%":h=100,d="%",c="f";break;case"p":h=100,d="%",c="r";break;case"b":case"o":case"x":case"X":a&&(a="0"+c.toLowerCase());case"c":case"d":f=!0,u=0;break;case"s":h=-1,c="r"}"#"===a&&(a=""),"r"!=c||u||(c="g"),null!=u&&("g"==c?u=Math.max(1,Math.min(21,u)):("e"==c||"f"==c)&&(u=Math.max(0,Math.min(20,u)))),c=is.get(c)||xt;var p=o&&l;return function(e){if(f&&e%1)return"";var t=0>e||0===e&&0>1/e?(e=-e,"-"):r;if(0>h){var m=oo.formatPrefix(e,u);e=m.scale(e),d=m.symbol}else e*=h;e=c(e,u),!o&&l&&(e=rs(e));var g=a.length+e.length+(p?0:t.length),v=s>g?Array(g=s-g+1).join(n):"";return p&&(e=rs(v+e)),Jo&&e.replace(".",Jo),t+=a,("<"===i?t+e+v:">"===i?v+t+e:"^"===i?v.substring(0,g>>=1)+t+e+v.substring(g):t+(p?e:v+e))+d}};var ns=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,is=oo.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=oo.round(e,yt(e,t))).toFixed(Math.max(0,Math.min(20,yt(e*(1+1e-15),t))))}}),rs=ct;if(es){var as=es.length;rs=function(e){for(var t=e.lastIndexOf("."),n=t>=0?"."+e.substring(t+1):(t=e.length,""),i=[],r=0,a=es[0];t>0&&a>0;)i.push(e.substring(t-=a,t+a)),a=es[r=(r+1)%as];return i.reverse().join(Zo||"")+n}}oo.geo={},oo.geo.stream=function(e,t){e&&os.hasOwnProperty(e.type)?os[e.type](e,t):wt(e,t)};var os={Feature:function(e,t){wt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;r>++i;)wt(n[i].geometry,t)}},ss={Sphere:function(e,t){t.sphere()},Point:function(e,t){var n=e.coordinates;t.point(n[0],n[1])},MultiPoint:function(e,t){for(var n,i=e.coordinates,r=-1,a=i.length;a>++r;)n=i[r],t.point(n[0],n[1])},LineString:function(e,t){_t(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;r>++i;)_t(n[i],t,0)},Polygon:function(e,t){Ct(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;r>++i;)Ct(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;r>++i;)wt(n[i],t)}};oo.geo.area=function(e){return ls=0,oo.geo.stream(e,cs),ls};var ls,us,cs={sphere:function(){ls+=4*Lo},point:M,lineStart:M,lineEnd:M,polygonStart:function(){us=0,cs.lineStart=Tt},polygonEnd:function(){var e=2*us;ls+=0>e?4*Lo+e:e,cs.lineStart=cs.lineEnd=cs.point=M}};oo.geo.bounds=function(){function e(e,t){y.push(x=[c=e,d=e]),h>t&&(h=t),t>f&&(f=t)}function t(t,n){var i=kt([t*Oo,n*Oo]);if(v){var r=Dt(v,i),a=[r[1],-r[0],0],o=Dt(a,r);jt(o),o=Nt(o);var l=t-p,u=l>0?1:-1,m=o[0]*Fo*u,g=Math.abs(l)>180;if(g^(m>u*p&&u*t>m)){var b=o[1]*Fo;b>f&&(f=b)}else if(m=(m+360)%360-180,g^(m>u*p&&u*t>m)){var b=-o[1]*Fo;h>b&&(h=b)}else h>n&&(h=n),n>f&&(f=n);g?p>t?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t):d>=c?(c>t&&(c=t),t>d&&(d=t)):t>p?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t)}else e(t,n);v=i,p=t}function n(){w.point=t}function i(){x[0]=c,x[1]=d,w.point=e,v=null}function r(e,n){if(v){var i=e-p;b+=Math.abs(i)>180?i+(i>0?360:-360):i}else m=e,g=n;cs.point(e,n),t(e,n)}function a(){cs.lineStart()}function o(){r(m,g),cs.lineEnd(),Math.abs(b)>Ho&&(c=-(d=180)),x[0]=c,x[1]=d,v=null}function s(e,t){return 0>(t-=e)?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?e>=t[0]&&t[1]>=e:t[0]>e||e>t[1]}var c,h,d,f,p,m,g,v,b,y,x,w={point:e,lineStart:n,lineEnd:i,polygonStart:function(){w.point=r,w.lineStart=a,w.lineEnd=o,b=0,cs.polygonStart()},polygonEnd:function(){cs.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=i,0>us?(c=-(d=180),h=-(f=90)):b>Ho?f=90:-Ho>b&&(h=-90),x[0]=c,x[1]=d}};return function(e){f=d=-(c=h=1/0),y=[],oo.geo.stream(e,w),y.sort(l);for(var t,n=1,i=y.length,r=y[0],a=[r];i>n;++n)t=y[n],u(t[0],r)||u(t[1],r)?(s(r[0],t[1])>s(r[0],r[1])&&(r[1]=t[1]),s(t[0],r[1])>s(r[0],r[1])&&(r[0]=t[0])):a.push(r=t);for(var o,t,p=-1/0,i=a.length-1,n=0,r=a[i];i>=n;r=t,++n)t=a[n],(o=s(r[1],t[0]))>p&&(p=o,c=t[0],d=r[1]);return y=x=null,[[c,h],[d,f]]}}(),oo.geo.centroid=function(e){hs=ds=fs=ps=ms=0,oo.geo.stream(e,gs);var t;return ds&&Math.abs(t=Math.sqrt(fs*fs+ps*ps+ms*ms))>Ho?[Math.atan2(ps,fs)*Fo,Math.asin(Math.max(-1,Math.min(1,ms/t)))*Fo]:void 0};var hs,ds,fs,ps,ms,gs={sphere:function(){2>hs&&(hs=2,ds=fs=ps=ms=0)},point:At,lineStart:Lt,lineEnd:Ht,polygonStart:function(){2>hs&&(hs=2,ds=fs=ps=ms=0),gs.lineStart=qt},polygonEnd:function(){gs.lineStart=Lt}},vs=It(Ot,$t,Vt),bs=1e9;oo.geo.projection=Zt,oo.geo.projectionMutator=en,(oo.geo.equirectangular=function(){return Zt(nn)}).raw=nn.invert=nn,oo.geo.rotation=function(e){function t(t){return t=e(t[0]*Oo,t[1]*Oo),t[0]*=Fo,t[1]*=Fo,t}return e=rn(e[0]%360*Oo,e[1]*Oo,e.length>2?e[2]*Oo:0),t.invert=function(t){return t=e.invert(t[0]*Oo,t[1]*Oo),t[0]*=Fo,t[1]*=Fo,t},t},oo.geo.circle=function(){function e(){var e="function"==typeof i?i.apply(this,arguments):i,t=rn(-e[0]*Oo,-e[1]*Oo,0).invert,r=[];return n(null,null,1,{point:function(e,n){r.push(e=t(e,n)),e[0]*=Fo,e[1]*=Fo}}),{type:"Polygon",coordinates:[r]}}var t,n,i=[0,0],r=6;return e.origin=function(t){return arguments.length?(i=t,e):i},e.angle=function(i){return arguments.length?(n=ln((t=+i)*Oo,r*Oo),e):t},e.precision=function(i){return arguments.length?(n=ln(t*Oo,(r=+i)*Oo),e):r},e.angle(90)},oo.geo.distance=function(e,t){var n,i=(t[0]-e[0])*Oo,r=e[1]*Oo,a=t[1]*Oo,o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(a),h=Math.cos(a);return Math.atan2(Math.sqrt((n=h*o)*n+(n=u*c-l*h*s)*n),l*c+u*h*s)},oo.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return oo.range(Math.ceil(a/g)*g,r,g).map(d).concat(oo.range(Math.ceil(u/v)*v,l,v).map(f)).concat(oo.range(Math.ceil(i/p)*p,n,p).filter(function(e){return Math.abs(e%g)>Ho}).map(c)).concat(oo.range(Math.ceil(s/m)*m,o,m).filter(function(e){return Math.abs(e%v)>Ho}).map(h))}var n,i,r,a,o,s,l,u,c,h,d,f,p=10,m=p,g=90,v=360,b=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(f(l).slice(1),d(r).reverse().slice(1),f(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],r=+t[1][0],u=+t[0][1],l=+t[1][1],a>r&&(t=a,a=r,r=t),u>l&&(t=u,u=l,l=t),e.precision(b)):[[a,u],[r,l]]},e.minorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],i>n&&(t=i,i=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(b)):[[i,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],e):[g,v]},e.minorStep=function(t){return arguments.length?(p=+t[0],m=+t[1],e):[p,m]},e.precision=function(t){return arguments.length?(b=+t,c=cn(s,o,90),h=hn(i,n,b),d=cn(u,l,90),f=hn(a,r,b),e):b},e.majorExtent([[-180,-90+Ho],[180,90-Ho]]).minorExtent([[-180,-80-Ho],[180,80+Ho]])},oo.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||i.apply(this,arguments),n||r.apply(this,arguments)]}}var t,n,i=dn,r=fn;return e.distance=function(){return oo.geo.distance(t||i.apply(this,arguments),n||r.apply(this,arguments))},e.source=function(n){return arguments.length?(i=n,t="function"==typeof n?null:n,e):i},e.target=function(t){return arguments.length?(r=t,n="function"==typeof t?null:t,e):r},e.precision=function(){return arguments.length?e:0},e},oo.geo.interpolate=function(e,t){return pn(e[0]*Oo,e[1]*Oo,t[0]*Oo,t[1]*Oo)},oo.geo.length=function(e){return ys=0,oo.geo.stream(e,xs),ys};var ys,xs={sphere:M,point:M,lineStart:mn,lineEnd:M,polygonStart:M,polygonEnd:M};(oo.geo.conicEqualArea=function(){return gn(vn)}).raw=vn,oo.geo.albers=function(){return oo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},oo.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(i(a,o),t)||r(a,o),t}var t,n,i,r,a=oo.geo.albers(),o=oo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=oo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?o:r>=.166&&.234>r&&i>=-.214&&-.115>i?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),i=s.stream(e);return{point:function(e,r){t.point(e,r),n.point(e,r),i.point(e,r)},sphere:function(){t.sphere(),n.sphere(),i.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var u=a.scale(),c=+t[0],h=+t[1];return n=a.translate(t).clipExtent([[c-.455*u,h-.238*u],[c+.455*u,h+.238*u]]).stream(l).point,i=o.translate([c-.307*u,h+.201*u]).clipExtent([[c-.425*u+Ho,h+.12*u+Ho],[c-.214*u-Ho,h+.234*u-Ho]]).stream(l).point,r=s.translate([c-.205*u,h+.212*u]).clipExtent([[c-.214*u+Ho,h+.166*u+Ho],[c-.115*u-Ho,h+.234*u-Ho]]).stream(l).point,e},e.scale(1070)};var ws,_s,Cs,Ts,ks,Es,Ds={point:M,lineStart:M,lineEnd:M,polygonStart:function(){_s=0,Ds.lineStart=bn},polygonEnd:function(){Ds.lineStart=Ds.lineEnd=Ds.point=M,ws+=Math.abs(_s/2)}},Ss={point:yn,lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M},Ms={point:_n,lineStart:Cn,lineEnd:Tn,polygonStart:function(){Ms.lineStart=kn},polygonEnd:function(){Ms.point=_n,Ms.lineStart=Cn,Ms.lineEnd=Tn}};oo.geo.path=function(){function e(e){return e&&oo.geo.stream(e,i(r.pointRadius("function"==typeof a?+a.apply(this,arguments):a))),r.result()}var t,n,i,r,a=4.5;return e.area=function(e){return ws=0,oo.geo.stream(e,i(Ds)),ws},e.centroid=function(e){return hs=fs=ps=ms=0,oo.geo.stream(e,i(Ms)),ms?[fs/ms,ps/ms]:void 0},e.bounds=function(e){return ks=Es=-(Cs=Ts=1/0),oo.geo.stream(e,i(Ss)),[[Cs,Ts],[ks,Es]]},e.projection=function(n){return arguments.length?(i=(t=n)?n.stream||Dn(n):ct,e):t},e.context=function(t){return arguments.length?(r=null==(n=t)?new xn:new En(t),e):n},e.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:+t,e):a},e.projection(oo.geo.albersUsa()).context(null)};var js=Sn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(oo.geo.azimuthalEqualArea=function(){return Zt(js)}).raw=js;var Ns=Sn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},ct);(oo.geo.azimuthalEquidistant=function(){return Zt(Ns)}).raw=Ns,(oo.geo.conicConformal=function(){return gn(Mn)}).raw=Mn,(oo.geo.conicEquidistant=function(){return gn(jn)}).raw=jn;var Ps=Sn(function(e){return 1/e},Math.atan);(oo.geo.gnomonic=function(){return Zt(Ps)}).raw=Ps,Nn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Lo/2]},(oo.geo.mercator=function(){return Pn(Nn)}).raw=Nn;var As=Sn(function(){return 1},Math.asin);(oo.geo.orthographic=function(){return Zt(As)}).raw=As;var qs=Sn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(oo.geo.stereographic=function(){return Zt(qs)}).raw=qs,An.invert=function(e,t){return[Math.atan2(z(e),Math.cos(t)),B(Math.sin(t)/W(e))]},(oo.geo.transverseMercator=function(){return Pn(An)}).raw=An,oo.geom={},oo.svg={},oo.svg.line=function(){return qn(ct)};var Ls=oo.map({linear:On,"linear-closed":Fn,"step-before":Rn,"step-after":In,basis:Gn,"basis-open":Vn,"basis-closed":Xn,bundle:Yn,cardinal:Wn,"cardinal-open":Bn,"cardinal-closed":zn,monotone:ti});Ls.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Hs=[0,2/3,1/3,0],Os=[0,1/3,2/3,0],Fs=[0,1/6,2/3,1/6];oo.geom.hull=function(e){function t(e){if(3>e.length)return[];var t,r,a,o,s,l,u,c,h,d,f,p,m=ut(n),g=ut(i),v=e.length,b=v-1,y=[],x=[],w=0;if(m===Ln&&i===Hn)t=e;else for(a=0,t=[];v>a;++a)t.push([+m.call(this,r=e[a],a),+g.call(this,r,a)]);for(a=1;v>a;++a)(t[a][1]<t[w][1]||t[a][1]==t[w][1]&&t[a][0]<t[w][0])&&(w=a);for(a=0;v>a;++a)a!==w&&(l=t[a][1]-t[w][1],s=t[a][0]-t[w][0],y.push({angle:Math.atan2(l,s),index:a}));for(y.sort(function(e,t){return e.angle-t.angle}),f=y[0].angle,d=y[0].index,h=0,a=1;b>a;++a){if(o=y[a].index,f==y[a].angle){if(s=t[d][0]-t[w][0],l=t[d][1]-t[w][1],u=t[o][0]-t[w][0],c=t[o][1]-t[w][1],s*s+l*l>=u*u+c*c){y[a].index=-1;continue}y[h].index=-1}f=y[a].angle,h=a,d=o}for(x.push(w),a=0,o=0;2>a;++o)y[o].index>-1&&(x.push(y[o].index),a++);for(p=x.length;b>o;++o)if(!(0>y[o].index)){for(;!ni(x[p-2],x[p-1],y[o].index,t);)--p;x[p++]=y[o].index}var _=[];for(a=p-1;a>=0;--a)_.push(e[x[a]]);return _}var n=Ln,i=Hn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(i=e,t):i},t)},oo.geom.polygon=function(e){return e.area=function(){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];n>++t;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return.5*i},e.centroid=function(t){var n,i,r=-1,a=e.length,o=0,s=0,l=e[a-1];for(arguments.length||(t=-1/(6*e.area()));a>++r;)n=l,l=e[r],i=n[0]*l[1]-l[0]*n[1],o+=(n[0]+l[0])*i,s+=(n[1]+l[1])*i;return[o*t,s*t]},e.clip=function(t){for(var n,i,r,a,o,s,l=-1,u=e.length,c=e[u-1];u>++l;){for(n=t.slice(),t.length=0,a=e[l],o=n[(r=n.length)-1],i=-1;r>++i;)s=n[i],ii(s,c,a)?(ii(o,c,a)||t.push(ri(o,s,c,a)),t.push(s)):ii(o,c,a)&&t.push(ri(o,s,c,a)),o=s;c=a}return t},e},oo.geom.delaunay=function(e){var t=e.map(function(){return[]}),n=[];return ai(e,function(n){t[n.region.l.index].push(e[n.region.r.index])}),t.forEach(function(t,i){var r=e[i],a=r[0],o=r[1];t.forEach(function(e){e.angle=Math.atan2(e[0]-a,e[1]-o)}),t.sort(function(e,t){return e.angle-t.angle});for(var s=0,l=t.length-1;l>s;s++)n.push([r,t[s],t[s+1]])}),n},oo.geom.voronoi=function(e){function t(e){var t,i,o,s=e.map(function(){return[]}),l=ut(r),u=ut(a),c=e.length,h=1e6;if(l===Ln&&u===Hn)t=e;else for(t=[],o=0;c>o;++o)t.push([+l.call(this,i=e[o],o),+u.call(this,i,o)]);if(ai(t,function(e){var t,n,i,r,a,o;1===e.a&&e.b>=0?(t=e.ep.r,n=e.ep.l):(t=e.ep.l,n=e.ep.r),1===e.a?(a=t?t.y:-h,i=e.c-e.b*a,o=n?n.y:h,r=e.c-e.b*o):(i=t?t.x:-h,a=e.c-e.a*i,r=n?n.x:h,o=e.c-e.a*r);var l=[i,a],u=[r,o];s[e.region.l.index].push(l,u),s[e.region.r.index].push(l,u)}),s=s.map(function(e,n){var i=t[n][0],r=t[n][1],a=e.map(function(e){return Math.atan2(e[0]-i,e[1]-r)
}),o=oo.range(e.length).sort(function(e,t){return a[e]-a[t]});return o.filter(function(e,t){return!t||a[e]-a[o[t-1]]>Ho}).map(function(t){return e[t]})}),s.forEach(function(e,n){var i=e.length;if(!i)return e.push([-h,-h],[-h,h],[h,h],[h,-h]);if(!(i>2)){var r=t[n],a=e[0],o=e[1],s=r[0],l=r[1],u=a[0],c=a[1],d=o[0],f=o[1],p=Math.abs(d-u),m=f-c;if(Ho>Math.abs(m)){var g=c>l?-h:h;e.push([-h,g],[h,g])}else if(Ho>p){var v=u>s?-h:h;e.push([v,-h],[v,h])}else{var g=(u-s)*(f-c)>(d-u)*(c-l)?h:-h,b=Math.abs(m)-p;Ho>Math.abs(b)?e.push([0>m?g:-g,g]):(b>0&&(g*=-1),e.push([-h,g],[h,g]))}}}),n)for(o=0;c>o;++o)n(s[o]);for(o=0;c>o;++o)s[o].point=e[o];return s}var n,i=null,r=Ln,a=Hn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(null==e?n=null:(i=[+e[0],+e[1]],n=oo.geom.polygon([[0,0],[0,i[1]],i,[i[0],0]]).clip),t):i},t.links=function(e){var t,n,i,o=e.map(function(){return[]}),s=[],l=ut(r),u=ut(a),c=e.length;if(l===Ln&&u===Hn)t=e;else for(i=0;c>i;++i)t.push([+l.call(this,n=e[i],i),+u.call(this,n,i)]);return ai(t,function(t){var n=t.region.l.index,i=t.region.r.index;o[n][i]||(o[n][i]=o[i][n]=!0,s.push({source:e[n],target:e[i]}))}),s},t.triangles=function(e){if(r===Ln&&a===Hn)return oo.geom.delaunay(e);var t,n,i,o,s,l=ut(r),u=ut(a);for(o=0,t=[],s=e.length;s>o;++o)n=[+l.call(this,i=e[o],o),+u.call(this,i,o)],n.data=i,t.push(n);return oo.geom.delaunay(t).map(function(e){return e.map(function(e){return e.data})})},t)};var Rs={l:"r",r:"l"};oo.geom.quadtree=function(e,t,n,i,r){function a(e){function a(e,t,n,i,r,a,o,s){if(!isNaN(n)&&!isNaN(i))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(.01>Math.abs(l-n)+Math.abs(c-i))u(e,t,n,i,r,a,o,s);else{var h=e.point;e.x=e.y=e.point=null,u(e,h,l,c,r,a,o,s),u(e,t,n,i,r,a,o,s)}else e.x=n,e.y=i,e.point=t}else u(e,t,n,i,r,a,o,s)}function u(e,t,n,i,r,o,s,l){var u=.5*(r+s),c=.5*(o+l),h=n>=u,d=i>=c,f=(d<<1)+h;e.leaf=!1,e=e.nodes[f]||(e.nodes[f]=li()),h?r=u:s=u,d?o=c:l=c,a(e,t,n,i,r,o,s,l)}var c,h,d,f,p,m,g,v,b,y=ut(s),x=ut(l);if(null!=t)m=t,g=n,v=i,b=r;else if(v=b=-(m=g=1/0),h=[],d=[],p=e.length,o)for(f=0;p>f;++f)c=e[f],m>c.x&&(m=c.x),g>c.y&&(g=c.y),c.x>v&&(v=c.x),c.y>b&&(b=c.y),h.push(c.x),d.push(c.y);else for(f=0;p>f;++f){var w=+y(c=e[f],f),_=+x(c,f);m>w&&(m=w),g>_&&(g=_),w>v&&(v=w),_>b&&(b=_),h.push(w),d.push(_)}var C=v-m,T=b-g;C>T?b=g+C:v=m+T;var k=li();if(k.add=function(e){a(k,e,+y(e,++f),+x(e,f),m,g,v,b)},k.visit=function(e){ui(e,k,m,g,v,b)},f=-1,null==t){for(;p>++f;)a(k,e[f],h[f],d[f],m,g,v,b);--f}else e.forEach(k.add);return h=d=e=c=null,k}var o,s=Ln,l=Hn;return(o=arguments.length)?(s=oi,l=si,3===o&&(r=n,i=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(l=e,a):l},a.size=function(e){return arguments.length?(null==e?t=n=i=r=null:(t=n=0,i=+e[0],r=+e[1]),a):null==t?null:[i,r]},a)},oo.interpolateRgb=ci,oo.transform=function(e){var t=so.createElementNS(oo.ns.prefix.svg,"g");return(oo.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new hi(n?n.matrix:Is)})(e)},hi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Is={a:1,b:0,c:0,d:1,e:0,f:0};oo.interpolateNumber=mi,oo.interpolateTransform=gi,oo.interpolateObject=vi,oo.interpolateString=bi;var Bs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;oo.interpolate=yi,oo.interpolators=[function(e,t){var n=typeof t;return("string"===n?Go.has(t)||/^(#|rgb\(|hsl\()/.test(t)?ci:bi:t instanceof L?ci:"object"===n?Array.isArray(t)?wi:vi:mi)(e,t)}],oo.interpolateArray=wi;var zs=function(){return ct},Ws=oo.map({linear:zs,poly:Si,quad:function(){return ki},cubic:function(){return Ei},sin:function(){return Mi},exp:function(){return ji},circle:function(){return Ni},elastic:Pi,back:Ai,bounce:function(){return qi}}),Us=oo.map({"in":ct,out:Ci,"in-out":Ti,"out-in":function(e){return Ti(Ci(e))}});oo.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,i=t>=0?e.substring(t+1):"in";return n=Ws.get(n)||zs,i=Us.get(i)||ct,_i(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},oo.interpolateHcl=Li,oo.interpolateHsl=Hi,oo.interpolateLab=Oi,oo.interpolateRound=Fi,oo.layout={},oo.layout.bundle=function(){return function(e){for(var t=[],n=-1,i=e.length;i>++n;)t.push(Bi(e[n]));return t}},oo.layout.chord=function(){function e(){var e,u,h,d,f,p={},m=[],g=oo.range(a),v=[];for(n=[],i=[],e=0,d=-1;a>++d;){for(u=0,f=-1;a>++f;)u+=r[d][f];m.push(u),v.push(oo.range(a)),e+=u}for(o&&g.sort(function(e,t){return o(m[e],m[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(r[t][e],r[t][n])})}),e=(2*Lo-c*a)/e,u=0,d=-1;a>++d;){for(h=u,f=-1;a>++f;){var b=g[d],y=v[b][f],x=r[b][y],w=u,_=u+=x*e;p[b+"-"+y]={index:b,subindex:y,startAngle:w,endAngle:_,value:x}}i[b]={index:b,startAngle:h,endAngle:u,value:(u-h)/e},u+=c}for(d=-1;a>++d;)for(f=d-1;a>++f;){var C=p[d+"-"+f],T=p[f+"-"+d];(C.value||T.value)&&n.push(C.value<T.value?{source:T,target:C}:{source:C,target:T})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,i,r,a,o,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(a=(r=e)&&r.length,n=i=null,u):r},u.padding=function(e){return arguments.length?(c=e,n=i=null,u):c},u.sortGroups=function(e){return arguments.length?(o=e,n=i=null,u):o},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return i||e(),i},u},oo.layout.force=function(){function e(e){return function(t,n,i,r){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=1/Math.sqrt(a*a+o*o);if(m>(r-n)*s){var l=t.charge*s*s;return e.px-=a*l,e.py-=o*l,!0}if(t.point&&isFinite(s)){var l=t.pointCharge*s*s;e.px-=a*l,e.py-=o*l}}return!t.charge}}function t(e){e.px=oo.event.x,e.py=oo.event.y,s.resume()}var n,i,r,a,o,s={},l=oo.dispatch("start","tick","end"),u=[1,1],c=.9,h=$s,d=Gs,f=-30,p=.1,m=.8,g=[],v=[];return s.tick=function(){if(.005>(i*=.99))return l.end({type:"end",alpha:i=0}),!0;var t,n,s,h,d,m,b,y,x,w=g.length,_=v.length;for(n=0;_>n;++n)s=v[n],h=s.source,d=s.target,y=d.x-h.x,x=d.y-h.y,(m=y*y+x*x)&&(m=i*a[n]*((m=Math.sqrt(m))-r[n])/m,y*=m,x*=m,d.x-=y*(b=h.weight/(d.weight+h.weight)),d.y-=x*b,h.x+=y*(b=1-b),h.y+=x*b);if((b=i*p)&&(y=u[0]/2,x=u[1]/2,n=-1,b))for(;w>++n;)s=g[n],s.x+=(y-s.x)*b,s.y+=(x-s.y)*b;if(f)for(Xi(t=oo.geom.quadtree(g),i,o),n=-1;w>++n;)(s=g[n]).fixed||t.visit(e(s));for(n=-1;w>++n;)s=g[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*c,s.y-=(s.py-(s.py=s.y))*c);l.tick({type:"tick",alpha:i})},s.nodes=function(e){return arguments.length?(g=e,s):g},s.links=function(e){return arguments.length?(v=e,s):v},s.size=function(e){return arguments.length?(u=e,s):u},s.linkDistance=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.gravity=function(e){return arguments.length?(p=+e,s):p},s.theta=function(e){return arguments.length?(m=+e,s):m},s.alpha=function(e){return arguments.length?(e=+e,i?i=e>0?e:0:e>0&&(l.start({type:"start",alpha:i=e}),oo.timer(s.tick)),s):i},s.start=function(){function e(e,i){for(var r,a=t(n),o=-1,s=a.length;s>++o;)if(!isNaN(r=a[o][e]))return r;return Math.random()*i}function t(){if(!l){for(l=[],i=0;p>i;++i)l[i]=[];for(i=0;m>i;++i){var e=v[i];l[e.source.index].push(e.target),l[e.target.index].push(e.source)}}return l[n]}var n,i,l,c,p=g.length,m=v.length,b=u[0],y=u[1];for(n=0;p>n;++n)(c=g[n]).index=n,c.weight=0;for(n=0;m>n;++n)c=v[n],"number"==typeof c.source&&(c.source=g[c.source]),"number"==typeof c.target&&(c.target=g[c.target]),++c.source.weight,++c.target.weight;for(n=0;p>n;++n)c=g[n],isNaN(c.x)&&(c.x=e("x",b)),isNaN(c.y)&&(c.y=e("y",y)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);if(r=[],"function"==typeof h)for(n=0;m>n;++n)r[n]=+h.call(this,v[n],n);else for(n=0;m>n;++n)r[n]=h;if(a=[],"function"==typeof d)for(n=0;m>n;++n)a[n]=+d.call(this,v[n],n);else for(n=0;m>n;++n)a[n]=d;if(o=[],"function"==typeof f)for(n=0;p>n;++n)o[n]=+f.call(this,g[n],n);else for(n=0;p>n;++n)o[n]=f;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=oo.behavior.drag().origin(ct).on("dragstart.force",Ui).on("drag.force",t).on("dragend.force",$i)),arguments.length?(this.on("mouseover.force",Gi).on("mouseout.force",Vi).call(n),void 0):n},oo.rebind(s,l,"on")};var $s=20,Gs=1;oo.layout.hierarchy=function(){function e(t,o,s){var l=r.call(n,t,o);if(t.depth=o,s.push(t),l&&(u=l.length)){for(var u,c,h=-1,d=t.children=[],f=0,p=o+1;u>++h;)c=e(l[h],p,s),c.parent=t,d.push(c),f+=c.value;i&&d.sort(i),a&&(t.value=f)}else a&&(t.value=+a.call(n,t,o)||0);return t}function t(e,i){var r=e.children,o=0;if(r&&(s=r.length))for(var s,l=-1,u=i+1;s>++l;)o+=t(r[l],u);else a&&(o=+a.call(n,e,i)||0);return a&&(e.value=o),o}function n(t){var n=[];return e(t,0,n),n}var i=Ji,r=Ki,a=Qi;return n.sort=function(e){return arguments.length?(i=e,n):i},n.children=function(e){return arguments.length?(r=e,n):r},n.value=function(e){return arguments.length?(a=e,n):a},n.revalue=function(e){return t(e,0),e},n},oo.layout.partition=function(){function e(t,n,i,r){var a=t.children;if(t.x=n,t.y=t.depth*r,t.dx=i,t.dy=r,a&&(o=a.length)){var o,s,l,u=-1;for(i=t.value?i/t.value:0;o>++u;)e(s=a[u],n,l=s.value*i,r),n+=l}}function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,a=-1;r>++a;)i=Math.max(i,t(n[a]));return 1+i}function n(n,a){var o=i.call(this,n,a);return e(o[0],0,r[0],r[1]/t(o[0])),o}var i=oo.layout.hierarchy(),r=[1,1];return n.size=function(e){return arguments.length?(r=e,n):r},Yi(n,i)},oo.layout.pie=function(){function e(a){var o=a.map(function(n,i){return+t.call(e,n,i)}),s=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-s)/oo.sum(o),u=oo.range(a.length);null!=n&&u.sort(n===Vs?function(e,t){return o[t]-o[e]}:function(e,t){return n(a[e],a[t])});var c=[];return u.forEach(function(e){var t;c[e]={data:a[e],value:t=o[e],startAngle:s,endAngle:s+=t*l}}),c}var t=Number,n=Vs,i=0,r=2*Lo;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(i=t,e):i},e.endAngle=function(t){return arguments.length?(r=t,e):r},e};var Vs={};oo.layout.stack=function(){function e(s,l){var u=s.map(function(n,i){return t.call(e,n,i)}),c=u.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),o.call(e,t,n)]})}),h=n.call(e,c,l);u=oo.permute(u,h),c=oo.permute(c,h);var d,f,p,m=i.call(e,c,l),g=u.length,v=u[0].length;for(f=0;v>f;++f)for(r.call(e,u[0][f],p=m[f],c[0][f][1]),d=1;g>d;++d)r.call(e,u[d][f],p+=c[d-1][f][1],c[d][f][1]);return s}var t=ct,n=ir,i=rr,r=nr,a=er,o=tr;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:Xs.get(t)||ir,e):n},e.offset=function(t){return arguments.length?(i="function"==typeof t?t:Ys.get(t)||rr,e):i},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(r=t,e):r},e};var Xs=oo.map({"inside-out":function(e){var t,n,i=e.length,r=e.map(ar),a=e.map(or),o=oo.range(i).sort(function(e,t){return r[e]-r[t]}),s=0,l=0,u=[],c=[];for(t=0;i>t;++t)n=o[t],l>s?(s+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return oo.range(e.length).reverse()},"default":ir}),Ys=oo.map({silhouette:function(e){var t,n,i,r=e.length,a=e[0].length,o=[],s=0,l=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];i>s&&(s=i),o.push(i)}for(n=0;a>n;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,i,r,a,o,s,l,u,c=e.length,h=e[0],d=h.length,f=[];for(f[0]=l=u=0,n=1;d>n;++n){for(t=0,r=0;c>t;++t)r+=e[t][n][1];for(t=0,a=0,s=h[n][0]-h[n-1][0];c>t;++t){for(i=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);t>i;++i)o+=(e[i][n][1]-e[i][n-1][1])/s;a+=o*e[t][n][1]}f[n]=l-=r?a/r*s:0,u>l&&(u=l)}for(n=0;d>n;++n)f[n]-=u;return f},expand:function(e){var t,n,i,r=e.length,a=e[0].length,o=1/r,s=[];for(n=0;a>n;++n){for(t=0,i=0;r>t;t++)i+=e[t][n][1];if(i)for(t=0;r>t;t++)e[t][n][1]/=i;else for(t=0;r>t;t++)e[t][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:rr});oo.layout.histogram=function(){function e(e,a){for(var o,s,l=[],u=e.map(n,this),c=i.call(this,u,a),h=r.call(this,c,u,a),a=-1,d=u.length,f=h.length-1,p=t?1:1/d;f>++a;)o=l[a]=[],o.dx=h[a+1]-(o.x=h[a]),o.y=0;if(f>0)for(a=-1;d>++a;)s=u[a],s>=c[0]&&c[1]>=s&&(o=l[oo.bisect(h,s,1,f)-1],o.y+=p,o.push(e[a]));return l}var t=!0,n=Number,i=cr,r=lr;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(i=ut(t),e):i},e.bins=function(t){return arguments.length?(r="number"==typeof t?function(e){return ur(e,t)}:ut(t),e):r},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},oo.layout.tree=function(){function e(e,r){function a(e,t){var i=e.children,r=e._tree;if(i&&(o=i.length)){for(var o,l,u,c=i[0],h=c,d=-1;o>++d;)u=i[d],a(u,l),h=s(u,l,h),l=u;yr(e);var f=.5*(c._tree.prelim+u._tree.prelim);t?(r.prelim=t._tree.prelim+n(e,t),r.mod=r.prelim-f):r.prelim=f}else t&&(r.prelim=t._tree.prelim+n(e,t))}function o(e,t){e.x=e._tree.prelim+t;var n=e.children;if(n&&(i=n.length)){var i,r=-1;for(t+=e._tree.mod;i>++r;)o(n[r],t)}}function s(e,t,i){if(t){for(var r,a=e,o=e,s=t,l=e.parent.children[0],u=a._tree.mod,c=o._tree.mod,h=s._tree.mod,d=l._tree.mod;s=fr(s),a=dr(a),s&&a;)l=dr(l),o=fr(o),o._tree.ancestor=e,r=s._tree.prelim+h-a._tree.prelim-u+n(s,a),r>0&&(xr(wr(s,e,i),e,r),u+=r,c+=r),h+=s._tree.mod,u+=a._tree.mod,d+=l._tree.mod,c+=o._tree.mod;s&&!fr(o)&&(o._tree.thread=s,o._tree.mod+=h-c),a&&!dr(l)&&(l._tree.thread=a,l._tree.mod+=u-d,i=e)}return i}var l=t.call(this,e,r),u=l[0];br(u,function(e,t){e._tree={ancestor:e,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),a(u),o(u,-u._tree.prelim);var c=pr(u,gr),h=pr(u,mr),d=pr(u,vr),f=c.x-n(c,h)/2,p=h.x+n(h,c)/2,m=d.depth||1;return br(u,function(e){e.x=(e.x-f)/(p-f)*i[0],e.y=e.depth/m*i[1],delete e._tree}),l}var t=oo.layout.hierarchy().sort(null).value(null),n=hr,i=[1,1];return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=t,e):i},Yi(e,t)},oo.layout.pack=function(){function e(e,r){var a=t.call(this,e,r),o=a[0];o.x=0,o.y=0,br(o,function(e){e.r=Math.sqrt(e.value)}),br(o,Er);var s=i[0],l=i[1],u=Math.max(2*o.r/s,2*o.r/l);if(n>0){var c=n*u/2;br(o,function(e){e.r+=c}),br(o,Er),br(o,function(e){e.r-=c}),u=Math.max(2*o.r/s,2*o.r/l)}return Mr(o,s/2,l/2,1/u),a}var t=oo.layout.hierarchy().sort(_r),n=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.padding=function(t){return arguments.length?(n=+t,e):n},Yi(e,t)},oo.layout.cluster=function(){function e(e,r){var a,o=t.call(this,e,r),s=o[0],l=0;br(s,function(e){var t=e.children;t&&t.length?(e.x=Pr(t),e.y=Nr(t)):(e.x=a?l+=n(e,a):0,e.y=0,a=e)});var u=Ar(s),c=qr(s),h=u.x-n(u,c)/2,d=c.x+n(c,u)/2;return br(s,function(e){e.x=(e.x-h)/(d-h)*i[0],e.y=(1-(s.y?e.y/s.y:1))*i[1]}),o}var t=oo.layout.hierarchy().sort(null).value(null),n=hr,i=[1,1];return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=t,e):i},Yi(e,t)},oo.layout.treemap=function(){function e(e,t){for(var n,i,r=-1,a=e.length;a>++r;)i=(n=e[r]).value*(0>t?0:t),n.area=isNaN(i)||0>=i?0:i}function t(n){var a=n.children;if(a&&a.length){var o,s,l,u=h(n),c=[],d=a.slice(),p=1/0,m="slice"===f?u.dx:"dice"===f?u.dy:"slice-dice"===f?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(o=d[l-1]),c.area+=o.area,"squarify"!==f||p>=(s=i(c,m))?(d.pop(),p=s):(c.area-=c.pop().area,r(c,m,u,!1),m=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(r(c,m,u,!0),c.length=c.area=0),a.forEach(t)}}function n(t){var i=t.children;if(i&&i.length){var a,o=h(t),s=i.slice(),l=[];for(e(s,o.dx*o.dy/t.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);i.forEach(n)}}function i(e,t){for(var n,i=e.area,r=0,a=1/0,o=-1,s=e.length;s>++o;)(n=e[o].area)&&(a>n&&(a=n),n>r&&(r=n));return i*=i,t*=t,i?Math.max(t*r*p/i,i/(t*a*p)):1/0}function r(e,t,n,i){var r,a=-1,o=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((i||c>n.dy)&&(c=n.dy);o>++a;)r=e[a],r.x=s,r.y=u,r.dy=c,s+=r.dx=Math.min(n.x+n.dx-s,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);o>++a;)r=e[a],r.x=s,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(i){var r=o||s(i),a=r[0];return a.x=0,a.y=0,a.dx=u[0],a.dy=u[1],o&&s.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),d&&(o=r),r}var o,s=oo.layout.hierarchy(),l=Math.round,u=[1,1],c=null,h=Lr,d=!1,f="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(u=e,a):u},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?Lr(t):Hr(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Hr(t,e)}if(!arguments.length)return c;var i;return h=null==(c=e)?Lr:"function"==(i=typeof e)?t:"number"===i?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(l=e?Math.round:Number,a):l!=Number},a.sticky=function(e){return arguments.length?(d=e,o=null,a):d},a.ratio=function(e){return arguments.length?(p=e,a):p},a.mode=function(e){return arguments.length?(f=e+"",a):f},Yi(a,s)},oo.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return e+t*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var e=oo.random.normal.apply(oo,arguments);return function(){return Math.exp(e())}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t/e}}},oo.scale={},oo.scale.linear=function(){return zr([0,1],[0,1],yi,!1)},oo.scale.log=function(){return Xr(oo.scale.linear().domain([0,Math.LN10]),10,Yr,Kr,[1,10])};var Ks=oo.format(".0e");oo.scale.pow=function(){return Zr(oo.scale.linear(),1,[0,1])},oo.scale.sqrt=function(){return oo.scale.pow().exponent(.5)},oo.scale.ordinal=function(){return ta([],{t:"range",a:[[]]})},oo.scale.category10=function(){return oo.scale.ordinal().range(Qs)},oo.scale.category20=function(){return oo.scale.ordinal().range(Js)},oo.scale.category20b=function(){return oo.scale.ordinal().range(Zs)},oo.scale.category20c=function(){return oo.scale.ordinal().range(el)};var Qs=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Js=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Zs=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],el=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];oo.scale.quantile=function(){return na([],[])},oo.scale.quantize=function(){return ia(0,1,[0,1])},oo.scale.threshold=function(){return ra([.5],[0,1])},oo.scale.identity=function(){return aa([0,1])},oo.svg.arc=function(){function e(){var e=t.apply(this,arguments),a=n.apply(this,arguments),o=i.apply(this,arguments)+tl,s=r.apply(this,arguments)+tl,l=(o>s&&(l=o,o=s,s=l),s-o),u=Lo>l?"0":"1",c=Math.cos(o),h=Math.sin(o),d=Math.cos(s),f=Math.sin(s);return l>=nl?e?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":e?"M"+a*c+","+a*h+"A"+a+","+a+" 0 "+u+",1 "+a*d+","+a*f+"L"+e*d+","+e*f+"A"+e+","+e+" 0 "+u+",0 "+e*c+","+e*h+"Z":"M"+a*c+","+a*h+"A"+a+","+a+" 0 "+u+",1 "+a*d+","+a*f+"L0,0"+"Z"}var t=oa,n=sa,i=la,r=ua;return e.innerRadius=function(n){return arguments.length?(t=ut(n),e):t},e.outerRadius=function(t){return arguments.length?(n=ut(t),e):n},e.startAngle=function(t){return arguments.length?(i=ut(t),e):i},e.endAngle=function(t){return arguments.length?(r=ut(t),e):r},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,a=(i.apply(this,arguments)+r.apply(this,arguments))/2+tl;return[Math.cos(a)*e,Math.sin(a)*e]},e};var tl=-Lo/2,nl=2*Lo-1e-6;oo.svg.line.radial=function(){var e=qn(ca);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Rn.reverse=In,In.reverse=Rn,oo.svg.area=function(){return ha(ct)},oo.svg.area.radial=function(){var e=ha(ca);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},oo.svg.chord=function(){function e(e,s){var l=t(this,a,e,s),u=t(this,o,e,s);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,i){var r=t.call(e,n,i),a=s.call(e,r,i),o=l.call(e,r,i)+tl,c=u.call(e,r,i)+tl;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function i(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Lo)+",1 "+t}function r(e,t,n,i){return"Q 0,0 "+i}var a=dn,o=fn,s=da,l=la,u=ua;return e.radius=function(t){return arguments.length?(s=ut(t),e):s},e.source=function(t){return arguments.length?(a=ut(t),e):a},e.target=function(t){return arguments.length?(o=ut(t),e):o},e.startAngle=function(t){return arguments.length?(l=ut(t),e):l},e.endAngle=function(t){return arguments.length?(u=ut(t),e):u},e},oo.svg.diagonal=function(){function e(e,r){var a=t.call(this,e,r),o=n.call(this,e,r),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=dn,n=fn,i=fa;return e.source=function(n){return arguments.length?(t=ut(n),e):t},e.target=function(t){return arguments.length?(n=ut(t),e):n},e.projection=function(t){return arguments.length?(i=t,e):i},e},oo.svg.diagonal.radial=function(){var e=oo.svg.diagonal(),t=fa,n=e.projection;return e.projection=function(e){return arguments.length?n(pa(t=e)):t},e},oo.svg.symbol=function(){function e(e,i){return(il.get(t.call(this,e,i))||va)(n.call(this,e,i))}var t=ga,n=ma;return e.type=function(n){return arguments.length?(t=ut(n),e):t},e.size=function(t){return arguments.length?(n=ut(t),e):n},e};var il=oo.map({circle:va,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ol)),n=t*ol;return"M0,"+-t+"L"+n+",0"+" 0,"+t+" "+-n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/al),n=t*al/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/al),n=t*al/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});oo.svg.symbolTypes=il.keys();var rl,al=Math.sqrt(3),ol=Math.tan(30*Oo),sl=[],ll=0,ul={ease:Di,delay:0,duration:250};sl.call=ko.call,sl.empty=ko.empty,sl.node=ko.node,oo.transition=function(e){return arguments.length?rl?e.transition():e:jo.transition()},oo.transition.prototype=sl,sl.select=function(e){var t,n,i,r=this.id,a=[];"function"!=typeof e&&(e=v(e));for(var o=-1,s=this.length;s>++o;){a.push(t=[]);for(var l=this[o],u=-1,c=l.length;c>++u;)(i=l[u])&&(n=e.call(i,i.__data__,u))?("__data__"in i&&(n.__data__=i.__data__),wa(n,u,r,i.__transition__[r]),t.push(n)):t.push(null)}return ba(a,r)},sl.selectAll=function(e){var t,n,i,r,a,o=this.id,s=[];"function"!=typeof e&&(e=b(e));for(var l=-1,u=this.length;u>++l;)for(var c=this[l],h=-1,d=c.length;d>++h;)if(i=c[h]){a=i.__transition__[o],n=e.call(i,i.__data__,h),s.push(t=[]);for(var f=-1,p=n.length;p>++f;)wa(r=n[f],f,o,a),t.push(r)}return ba(s,o)},sl.filter=function(e){var t,n,i,r=[];"function"!=typeof e&&(e=D(e));for(var a=0,o=this.length;o>a;a++){r.push(t=[]);for(var n=this[a],s=0,l=n.length;l>s;s++)(i=n[s])&&e.call(i,i.__data__,s)&&t.push(i)}return ba(r,this.id,this.time).ease(this.ease())},sl.tween=function(e,t){var n=this.id;return 2>arguments.length?this.node().__transition__[n].tween.get(e):A(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(i){i.__transition__[n].tween.set(e,t)})},sl.attr=function(e,t){function n(){this.removeAttribute(s)}function i(){this.removeAttributeNS(s.space,s.local)}function r(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=o(n,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?i:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(2>arguments.length){for(t in e)this.attr(t,e[t]);return this}var o=xi(e),s=oo.ns.qualify(e);return ya(this,"attr."+e,t,s.local?a:r)},sl.attrTween=function(e,t){function n(e,n){var i=t.call(this,e,n,this.getAttribute(r));return i&&function(e){this.setAttribute(r,i(e))}}function i(e,n){var i=t.call(this,e,n,this.getAttributeNS(r.space,r.local));return i&&function(e){this.setAttributeNS(r.space,r.local,i(e))}}var r=oo.ns.qualify(e);return this.tween("attr."+e,r.local?i:n)},sl.style=function(e,t,n){function i(){this.style.removeProperty(e)}function r(t){return null==t?i:(t+="",function(){var i,r=lo.getComputedStyle(this,null).getPropertyValue(e);return r!==t&&(i=o(r,t),function(t){this.style.setProperty(e,i(t),n)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}var o=xi(e);return ya(this,"style."+e,t,r)},sl.styleTween=function(e,t,n){function i(i,r){var a=t.call(this,i,r,lo.getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),n)}}return 3>arguments.length&&(n=""),this.tween("style."+e,i)},sl.text=function(e){return ya(this,"text",e,xa)},sl.remove=function(){return this.each("end.transition",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},sl.ease=function(e){var t=this.id;return 1>arguments.length?this.node().__transition__[t].ease:("function"!=typeof e&&(e=oo.ease.apply(oo,arguments)),A(this,function(n){n.__transition__[t].ease=e}))},sl.delay=function(e){var t=this.id;return A(this,"function"==typeof e?function(n,i,r){n.__transition__[t].delay=0|e.call(n,n.__data__,i,r)}:(e|=0,function(n){n.__transition__[t].delay=e}))},sl.duration=function(e){var t=this.id;return A(this,"function"==typeof e?function(n,i,r){n.__transition__[t].duration=Math.max(1,0|e.call(n,n.__data__,i,r))}:(e=Math.max(1,0|e),function(n){n.__transition__[t].duration=e}))},sl.each=function(e,t){var n=this.id;if(2>arguments.length){var i=ul,r=rl;rl=n,A(this,function(t,i,r){ul=t.__transition__[n],e.call(t,t.__data__,i,r)}),ul=i,rl=r}else A(this,function(i){i.__transition__[n].event.on(e,t)});return this},sl.transition=function(){for(var e,t,n,i,r=this.id,a=++ll,o=[],s=0,l=this.length;l>s;s++){o.push(e=[]);for(var t=this[s],u=0,c=t.length;c>u;u++)(n=t[u])&&(i=Object.create(n.__transition__[r]),i.delay+=i.duration,wa(n,u,a,i)),e.push(n)}return ba(o,a)},oo.svg.axis=function(){function e(e){e.each(function(){var e,h=oo.select(this),d=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,f=null==t?n.tickFormat?n.tickFormat.apply(n,l):String:t,p=Ta(n,d,c),m=h.selectAll(".tick.minor").data(p,String),g=m.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),v=oo.transition(m.exit()).style("opacity",1e-6).remove(),b=oo.transition(m).style("opacity",1),y=h.selectAll(".tick.major").data(d,String),x=y.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),w=oo.transition(y.exit()).style("opacity",1e-6).remove(),_=oo.transition(y).style("opacity",1),C=Fr(n),T=h.selectAll(".domain").data([0]),k=(T.enter().append("path").attr("class","domain"),oo.transition(T)),E=n.copy(),D=this.__chart__||E;this.__chart__=E,x.append("line"),x.append("text");var S=x.select("line"),M=_.select("line"),j=y.select("text").text(f),N=x.select("text"),P=_.select("text");switch(i){case"bottom":e=_a,g.attr("y2",a),b.attr("x2",0).attr("y2",a),S.attr("y2",r),N.attr("y",Math.max(r,0)+s),M.attr("x2",0).attr("y2",r),P.attr("x",0).attr("y",Math.max(r,0)+s),j.attr("dy",".71em").style("text-anchor","middle"),k.attr("d","M"+C[0]+","+o+"V0H"+C[1]+"V"+o);break;case"top":e=_a,g.attr("y2",-a),b.attr("x2",0).attr("y2",-a),S.attr("y2",-r),N.attr("y",-(Math.max(r,0)+s)),M.attr("x2",0).attr("y2",-r),P.attr("x",0).attr("y",-(Math.max(r,0)+s)),j.attr("dy","0em").style("text-anchor","middle"),k.attr("d","M"+C[0]+","+-o+"V0H"+C[1]+"V"+-o);break;case"left":e=Ca,g.attr("x2",-a),b.attr("x2",-a).attr("y2",0),S.attr("x2",-r),N.attr("x",-(Math.max(r,0)+s)),M.attr("x2",-r).attr("y2",0),P.attr("x",-(Math.max(r,0)+s)).attr("y",0),j.attr("dy",".32em").style("text-anchor","end"),k.attr("d","M"+-o+","+C[0]+"H0V"+C[1]+"H"+-o);break;case"right":e=Ca,g.attr("x2",a),b.attr("x2",a).attr("y2",0),S.attr("x2",r),N.attr("x",Math.max(r,0)+s),M.attr("x2",r).attr("y2",0),P.attr("x",Math.max(r,0)+s).attr("y",0),j.attr("dy",".32em").style("text-anchor","start"),k.attr("d","M"+o+","+C[0]+"H0V"+C[1]+"H"+o)}if(n.ticks)x.call(e,D),_.call(e,E),w.call(e,E),g.call(e,D),b.call(e,E),v.call(e,E);else{var A=E.rangeBand()/2,q=function(e){return E(e)+A};x.call(e,q),_.call(e,q)}})}var t,n=oo.scale.linear(),i=cl,r=6,a=6,o=6,s=3,l=[10],u=null,c=0;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(i=t in hl?t+"":cl,e):i},e.ticks=function(){return arguments.length?(l=arguments,e):l},e.tickValues=function(t){return arguments.length?(u=t,e):u},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t,n){if(!arguments.length)return r;var i=arguments.length-1;return r=+t,a=i>1?+n:r,o=i>0?+arguments[i]:r,e},e.tickPadding=function(t){return arguments.length?(s=+t,e):s},e.tickSubdivide=function(t){return arguments.length?(c=+t,e):c},e};var cl="bottom",hl={top:1,right:1,bottom:1,left:1};oo.svg.brush=function(){function e(a){a.each(function(){var a,o=oo.select(this),u=o.selectAll(".background").data([0]),h=o.selectAll(".extent").data([0]),d=o.selectAll(".resize").data(c,String);o.style("pointer-events","all").on("mousedown.brush",r).on("touchstart.brush",r),u.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),d.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return dl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),d.style("display",e.empty()?"none":null),d.exit().remove(),s&&(a=Fr(s),u.attr("x",a[0]).attr("width",a[1]-a[0]),n(o)),l&&(a=Fr(l),u.attr("y",a[0]).attr("height",a[1]-a[0]),i(o)),t(o)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+h[+/e$/.test(e)][0]+","+h[+/^s/.test(e)][1]+")"})}function n(e){e.select(".extent").attr("x",h[0][0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1][0]-h[0][0])}function i(e){e.select(".extent").attr("y",h[0][1]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1][1]-h[0][1])}function r(){function r(){var e=oo.event.changedTouches;
return e?oo.touches(b,e)[0]:oo.mouse(b)}function c(){32==oo.event.keyCode&&(k||(g=null,E[0]-=h[1][0],E[1]-=h[1][1],k=2),u())}function d(){32==oo.event.keyCode&&2==k&&(E[0]+=h[1][0],E[1]+=h[1][1],k=0,u())}function f(){var e=r(),a=!1;v&&(e[0]+=v[0],e[1]+=v[1]),k||(oo.event.altKey?(g||(g=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]),E[0]=h[+(e[0]<g[0])][0],E[1]=h[+(e[1]<g[1])][1]):g=null),C&&p(e,s,0)&&(n(w),a=!0),T&&p(e,l,1)&&(i(w),a=!0),a&&(t(w),x({type:"brush",mode:k?"move":"resize"}))}function p(e,t,n){var i,r,o=Fr(t),s=o[0],l=o[1],u=E[n],c=h[1][n]-h[0][n];return k&&(s-=u,l-=c+u),i=Math.max(s,Math.min(l,e[n])),k?r=(i+=u)+c:(g&&(u=Math.max(s,Math.min(l,2*g[n]-i))),i>u?(r=i,i=u):r=u),h[0][n]!==i||h[1][n]!==r?(a=null,h[0][n]=i,h[1][n]=r,!0):void 0}function m(){f(),w.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),oo.select("body").style("cursor",null),D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),x({type:"brushend"}),u()}var g,v,b=this,y=oo.select(oo.event.target),x=o.of(b,arguments),w=oo.select(b),_=y.datum(),C=!/^(n|s)$/.test(_)&&s,T=!/^(e|w)$/.test(_)&&l,k=y.classed("extent"),E=r(),D=oo.select(lo).on("mousemove.brush",f).on("mouseup.brush",m).on("touchmove.brush",f).on("touchend.brush",m).on("keydown.brush",c).on("keyup.brush",d);if(k)E[0]=h[0][0]-E[0],E[1]=h[0][1]-E[1];else if(_){var S=+/w$/.test(_),M=+/^n/.test(_);v=[h[1-S][0]-E[0],h[1-M][1]-E[1]],E[0]=h[S][0],E[1]=h[M][1]}else oo.event.altKey&&(g=E.slice());w.style("pointer-events","none").selectAll(".resize").style("display",null),oo.select("body").style("cursor",y.style("cursor")),x({type:"brushstart"}),f(),u()}var a,o=d(e,"brushstart","brush","brushend"),s=null,l=null,c=fl[0],h=[[0,0],[0,0]];return e.x=function(t){return arguments.length?(s=t,c=fl[!s<<1|!l],e):s},e.y=function(t){return arguments.length?(l=t,c=fl[!s<<1|!l],e):l},e.extent=function(t){var n,i,r,o,u;return arguments.length?(a=[[0,0],[0,0]],s&&(n=t[0],i=t[1],l&&(n=n[0],i=i[0]),a[0][0]=n,a[1][0]=i,s.invert&&(n=s(n),i=s(i)),n>i&&(u=n,n=i,i=u),h[0][0]=0|n,h[1][0]=0|i),l&&(r=t[0],o=t[1],s&&(r=r[1],o=o[1]),a[0][1]=r,a[1][1]=o,l.invert&&(r=l(r),o=l(o)),r>o&&(u=r,r=o,o=u),h[0][1]=0|r,h[1][1]=0|o),e):(t=a||h,s&&(n=t[0][0],i=t[1][0],a||(n=h[0][0],i=h[1][0],s.invert&&(n=s.invert(n),i=s.invert(i)),n>i&&(u=n,n=i,i=u))),l&&(r=t[0][1],o=t[1][1],a||(r=h[0][1],o=h[1][1],l.invert&&(r=l.invert(r),o=l.invert(o)),r>o&&(u=r,r=o,o=u))),s&&l?[[n,r],[i,o]]:s?[n,i]:l&&[r,o])},e.clear=function(){return a=null,h[0][0]=h[0][1]=h[1][0]=h[1][1]=0,e},e.empty=function(){return s&&h[0][0]===h[1][0]||l&&h[0][1]===h[1][1]},oo.rebind(e,o,"on")};var dl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];oo.time={};var pl=Date,ml=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];ka.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){gl.setUTCDate.apply(this._,arguments)},setDay:function(){gl.setUTCDay.apply(this._,arguments)},setFullYear:function(){gl.setUTCFullYear.apply(this._,arguments)},setHours:function(){gl.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){gl.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){gl.setUTCMinutes.apply(this._,arguments)},setMonth:function(){gl.setUTCMonth.apply(this._,arguments)},setSeconds:function(){gl.setUTCSeconds.apply(this._,arguments)},setTime:function(){gl.setTime.apply(this._,arguments)}};var gl=Date.prototype,vl="%a %b %e %X %Y",bl="%m/%d/%Y",yl="%H:%M:%S",xl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],wl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_l=["January","February","March","April","May","June","July","August","September","October","November","December"],Cl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];oo.time.year=Ea(function(e){return e=oo.time.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),oo.time.years=oo.time.year.range,oo.time.years.utc=oo.time.year.utc.range,oo.time.day=Ea(function(e){var t=new pl(1970,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),oo.time.days=oo.time.day.range,oo.time.days.utc=oo.time.day.utc.range,oo.time.dayOfYear=function(e){var t=oo.time.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},ml.forEach(function(e,t){e=e.toLowerCase(),t=7-t;var n=oo.time[e]=Ea(function(e){return(e=oo.time.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=oo.time.year(e).getDay();return Math.floor((oo.time.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});oo.time[e+"s"]=n.range,oo.time[e+"s"].utc=n.utc.range,oo.time[e+"OfYear"]=function(e){var n=oo.time.year(e).getDay();return Math.floor((oo.time.dayOfYear(e)+(n+t)%7)/7)}}),oo.time.week=oo.time.sunday,oo.time.weeks=oo.time.sunday.range,oo.time.weeks.utc=oo.time.sunday.utc.range,oo.time.weekOfYear=oo.time.sundayOfYear,oo.time.format=function(e){function t(t){for(var i,r,a,o=[],s=-1,l=0;n>++s;)37===e.charCodeAt(s)&&(o.push(e.substring(l,s)),null!=(r=jl[i=e.charAt(++s)])&&(i=e.charAt(++s)),(a=Nl[i])&&(i=a(t,null==r?"e"===i?" ":"0":r)),o.push(i),l=s+1);return o.push(e.substring(l,s)),o.join("")}var n=e.length;return t.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},i=Sa(n,e,t,0);if(i!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=new pl;return r.setFullYear(n.y,n.m,n.d),r.setHours(n.H,n.M,n.S,n.L),r},t.toString=function(){return e},t};var Tl=Ma(xl),kl=Ma(wl),El=Ma(_l),Dl=ja(_l),Sl=Ma(Cl),Ml=ja(Cl),jl={"-":"",_:" ",0:"0"},Nl={a:function(e){return wl[e.getDay()]},A:function(e){return xl[e.getDay()]},b:function(e){return Cl[e.getMonth()]},B:function(e){return _l[e.getMonth()]},c:oo.time.format(vl),d:function(e,t){return Na(e.getDate(),t,2)},e:function(e,t){return Na(e.getDate(),t,2)},H:function(e,t){return Na(e.getHours(),t,2)},I:function(e,t){return Na(e.getHours()%12||12,t,2)},j:function(e,t){return Na(1+oo.time.dayOfYear(e),t,3)},L:function(e,t){return Na(e.getMilliseconds(),t,3)},m:function(e,t){return Na(e.getMonth()+1,t,2)},M:function(e,t){return Na(e.getMinutes(),t,2)},p:function(e){return e.getHours()>=12?"PM":"AM"},S:function(e,t){return Na(e.getSeconds(),t,2)},U:function(e,t){return Na(oo.time.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Na(oo.time.mondayOfYear(e),t,2)},x:oo.time.format(bl),X:oo.time.format(yl),y:function(e,t){return Na(e.getFullYear()%100,t,2)},Y:function(e,t){return Na(e.getFullYear()%1e4,t,4)},Z:Ya,"%":function(){return"%"}},Pl={a:Pa,A:Aa,b:qa,B:La,c:Ha,d:Wa,e:Wa,H:Ua,I:Ua,L:Va,m:za,M:$a,p:Xa,S:Ga,x:Oa,X:Fa,y:Ia,Y:Ra},Al=/^\s*\d+/,ql=oo.map({am:0,pm:1});oo.time.format.utc=function(e){function t(e){try{pl=ka;var t=new pl;return t._=e,n(t)}finally{pl=Date}}var n=oo.time.format(e);return t.parse=function(e){try{pl=ka;var t=n.parse(e);return t&&t._}finally{pl=Date}},t.toString=n.toString,t};var Ll=oo.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");oo.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ka:Ll,Ka.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ka.toString=Ll.toString,oo.time.second=Ea(function(e){return new pl(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),oo.time.seconds=oo.time.second.range,oo.time.seconds.utc=oo.time.second.utc.range,oo.time.minute=Ea(function(e){return new pl(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),oo.time.minutes=oo.time.minute.range,oo.time.minutes.utc=oo.time.minute.utc.range,oo.time.hour=Ea(function(e){var t=e.getTimezoneOffset()/60;return new pl(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),oo.time.hours=oo.time.hour.range,oo.time.hours.utc=oo.time.hour.utc.range,oo.time.month=Ea(function(e){return e=oo.time.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),oo.time.months=oo.time.month.range,oo.time.months.utc=oo.time.month.utc.range;var Hl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ol=[[oo.time.second,1],[oo.time.second,5],[oo.time.second,15],[oo.time.second,30],[oo.time.minute,1],[oo.time.minute,5],[oo.time.minute,15],[oo.time.minute,30],[oo.time.hour,1],[oo.time.hour,3],[oo.time.hour,6],[oo.time.hour,12],[oo.time.day,1],[oo.time.day,2],[oo.time.week,1],[oo.time.month,1],[oo.time.month,3],[oo.time.year,1]],Fl=[[oo.time.format("%Y"),Ot],[oo.time.format("%B"),function(e){return e.getMonth()}],[oo.time.format("%b %d"),function(e){return 1!=e.getDate()}],[oo.time.format("%a %d"),function(e){return e.getDay()&&1!=e.getDate()}],[oo.time.format("%I %p"),function(e){return e.getHours()}],[oo.time.format("%I:%M"),function(e){return e.getMinutes()}],[oo.time.format(":%S"),function(e){return e.getSeconds()}],[oo.time.format(".%L"),function(e){return e.getMilliseconds()}]],Rl=oo.scale.linear(),Il=Za(Fl);Ol.year=function(e,t){return Rl.domain(e.map(to)).ticks(t).map(eo)},oo.time.scale=function(){return Qa(oo.scale.linear(),Ol,Il)};var Bl=Ol.map(function(e){return[e[0].utc,e[1]]}),zl=[[oo.time.format.utc("%Y"),Ot],[oo.time.format.utc("%B"),function(e){return e.getUTCMonth()}],[oo.time.format.utc("%b %d"),function(e){return 1!=e.getUTCDate()}],[oo.time.format.utc("%a %d"),function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],[oo.time.format.utc("%I %p"),function(e){return e.getUTCHours()}],[oo.time.format.utc("%I:%M"),function(e){return e.getUTCMinutes()}],[oo.time.format.utc(":%S"),function(e){return e.getUTCSeconds()}],[oo.time.format.utc(".%L"),function(e){return e.getUTCMilliseconds()}]],Wl=Za(zl);return Bl.year=function(e,t){return Rl.domain(e.map(io)).ticks(t).map(no)},oo.time.scale.utc=function(){return Qa(oo.scale.linear(),Bl,Wl)},oo.text=ht(function(e){return e.responseText}),oo.json=function(e,t){return dt(e,"application/json",ro,t)},oo.html=function(e,t){return dt(e,"text/html",ao,t)},oo.xml=ht(function(e){return e.responseXML}),oo}(),topojson=function(){function e(e,t){function n(t){var n=e.arcs[t],i=n[0],r=[0,0];return n.forEach(function(e){r[0]+=e[0],r[1]+=e[1]}),[i,r]}var i={},r={},a={};t.forEach(function(e){var t=n(e);(i[t[0]]||(i[t[0]]=[])).push(e),(i[t[1]]||(i[t[1]]=[])).push(~e)}),t.forEach(function(e){var t,i,o=n(e),s=o[0],l=o[1];if(t=a[s])if(delete a[t.end],t.push(e),t.end=l,i=r[l]){delete r[i.start];var u=i===t?t:t.concat(i);r[u.start=t.start]=a[u.end=i.end]=u}else if(i=a[l]){delete r[i.start],delete a[i.end];var u=t.concat(i.map(function(e){return~e}).reverse());r[u.start=t.start]=a[u.end=i.start]=u}else r[t.start]=a[t.end]=t;else if(t=r[l])if(delete r[t.start],t.unshift(e),t.start=s,i=a[s]){delete a[i.end];var c=i===t?t:i.concat(t);r[c.start=i.start]=a[c.end=t.end]=c}else if(i=r[s]){delete r[i.start],delete a[i.end];var c=i.map(function(e){return~e}).reverse().concat(t);r[c.start=i.end]=a[c.end=t.end]=c}else r[t.start]=a[t.end]=t;else if(t=r[s])if(delete r[t.start],t.unshift(~e),t.start=l,i=a[l]){delete a[i.end];var c=i===t?t:i.concat(t);r[c.start=i.start]=a[c.end=t.end]=c}else if(i=r[l]){delete r[i.start],delete a[i.end];var c=i.map(function(e){return~e}).reverse().concat(t);r[c.start=i.end]=a[c.end=t.end]=c}else r[t.start]=a[t.end]=t;else if(t=a[l])if(delete a[t.end],t.push(~e),t.end=s,i=a[s]){delete r[i.start];var u=i===t?t:t.concat(i);r[u.start=t.start]=a[u.end=i.end]=u}else if(i=r[s]){delete r[i.start],delete a[i.end];var u=t.concat(i.map(function(e){return~e}).reverse());r[u.start=t.start]=a[u.end=i.start]=u}else r[t.start]=a[t.end]=t;else t=[e],r[t.start=s]=a[t.end=l]=t});var o=[];for(var s in a)o.push(a[s]);return o}function t(t,n,i){function a(e){0>e&&(e=~e),(h[e]||(h[e]=[])).push(c)}function o(e){e.forEach(a)}function s(e){e.forEach(o)}function l(e){"GeometryCollection"===e.type?e.geometries.forEach(l):e.type in d&&(c=e,d[e.type](e.arcs))}var u=[];if(arguments.length>1){var c,h=[],d={LineString:o,MultiLineString:s,Polygon:s,MultiPolygon:function(e){e.forEach(s)}};l(n),h.forEach(3>arguments.length?function(e,t){u.push(t)}:function(e,t){i(e[0],e[e.length-1])&&u.push(t)})}else for(var f=0,p=t.arcs.length;p>f;++f)u.push(f);return r(t,{type:"MultiLineString",arcs:e(t,u)})}function n(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return i(e,t)})}:i(e,t)}function i(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:r(e,t)};return null==t.id&&delete n.id,n}function r(e,t){function n(e,t){t.length&&t.pop();for(var n,i=p[0>e?~e:e],r=0,o=i.length,s=0,l=0;o>r;++r)t.push([(s+=(n=i[r])[0])*c+d,(l+=n[1])*h+f]);0>e&&a(t,o)}function i(e){return[e[0]*c+d,e[1]*h+f]}function r(e){for(var t=[],i=0,r=e.length;r>i;++i)n(e[i],t);return 2>t.length&&t.push(t[0]),t}function o(e){for(var t=r(e);4>t.length;)t.push(t[0]);return t}function s(e){return e.map(o)}function l(e){var t=e.type;return"GeometryCollection"===t?{type:t,geometries:e.geometries.map(l)}:t in m?{type:t,coordinates:m[t](e)}:null}var u=e.transform,c=u.scale[0],h=u.scale[1],d=u.translate[0],f=u.translate[1],p=e.arcs,m={Point:function(e){return i(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(i)},LineString:function(e){return r(e.arcs)},MultiLineString:function(e){return e.arcs.map(r)},Polygon:function(e){return s(e.arcs)},MultiPolygon:function(e){return e.arcs.map(s)}};return l(t)}function a(e,t){for(var n,i=e.length,r=i-t;--i>r;)n=e[r],e[r++]=e[i],e[i]=n}function o(e,t){for(var n=0,i=e.length;i>n;){var r=n+i>>>1;t>e[r]?n=r+1:i=r}return n}function s(e){function t(e,t){e.forEach(function(e){0>e&&(e=~e);var n=r[e];n?n.push(t):r[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function i(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){i(e,t)}):e.type in s&&s[e.type](e.arcs,t)}var r={},a=e.map(function(){return[]}),s={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(i);for(var l in r)for(var u=r[l],c=u.length,h=0;c>h;++h)for(var d=h+1;c>d;++d){var f,p=u[h],m=u[d];(f=a[p])[l=o(f,m)]!==m&&f.splice(l,0,m),(f=a[m])[l=o(f,p)]!==p&&f.splice(l,0,p)}return a}return{version:"1.1.4",mesh:t,feature:n,neighbors:s}}();var Rickshaw={namespace:function(e){for(var t=e.split("."),n=Rickshaw,i=1,r=t.length;r>i;i++){var a=t[i];n[a]=n[a]||{},n=n[a]}return n},keys:function(e){var t=[];for(var n in e)t.push(n);return t},extend:function(e,t){for(var n in t)e[n]=t[n];return e}};if("undefined"!=typeof module&&module.exports){var d3=require("d3");module.exports=Rickshaw}(function(e){function t(e){return h.call(e)===b}function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function i(e){if(r(e)!==v)throw new TypeError;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function r(e){switch(e){case null:return d;case void 0:return f}var t=typeof e;switch(t){case"boolean":return p;case"number":return m;case"string":return g}return v}function a(e){return e===void 0}function o(e){var t=(""+e).match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=t.length||t[0]?t:[]}function s(e,t){var n=e;return function(){var e=l([c(n,this)],arguments);return t.apply(this,e)}}function l(e,t){for(var n=e.length,i=t.length;i--;)e[n+i]=t[i];return e}function u(e,t){return e=y.call(e,0),l(e,t)}function c(e,t){if(2>arguments.length&&a(arguments[0]))return this;var n=e,i=y.call(arguments,2);return function(){var e=u(i,arguments);return n.apply(t,e)}}var h=Object.prototype.toString,d="Null",f="Undefined",p="Boolean",m="Number",g="String",v="Object",b="[object Function]",y=Array.prototype.slice,x=function(){},w=function(){function e(){}function r(){function i(){this.initialize.apply(this,arguments)}var r=null,a=[].slice.apply(arguments);if(t(a[0])&&(r=a.shift()),n(i,w.Methods),i.superclass=r,i.subclasses=[],r){e.prototype=r.prototype,i.prototype=new e;try{r.subclasses.push(i)}catch(o){}}for(var s=0,l=a.length;l>s;s++)i.addMethods(a[s]);return i.prototype.initialize||(i.prototype.initialize=x),i.prototype.constructor=i,i}function a(e){var n=this.superclass&&this.superclass.prototype,r=i(e);l&&(e.toString!=Object.prototype.toString&&r.push("toString"),e.valueOf!=Object.prototype.valueOf&&r.push("valueOf"));for(var a=0,u=r.length;u>a;a++){var h=r[a],d=e[h];if(n&&t(d)&&"$super"==o(d)[0]){var f=d;d=s(function(e){return function(){return n[e].apply(this,arguments)}}(h),f),d.valueOf=c(f.valueOf,f),d.toString=c(f.toString,f)}this.prototype[h]=d}return this}var l=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}();return{create:r,Methods:{addMethods:a}}}();e.exports?e.exports.Class=w:e.Class=w})(Rickshaw),Rickshaw.namespace("Rickshaw.Compat.ClassList"),Rickshaw.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||function(e){"use strict";var t="classList",n="prototype",i=(e.HTMLElement||e.Element)[n],r=Object,a=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},u=function(e){for(var t=a.call(e.className),n=t?t.split(/\s+/):[],i=0,r=n.length;r>i;i++)this.push(n[i]);this._updateClassName=function(){e.className=""+this}},c=u[n]=[],h=function(){return new u(this)};if(s[n]=Error[n],c.item=function(e){return this[e]||null},c.contains=function(e){return e+="",-1!==l(this,e)},c.add=function(e){e+="",-1===l(this,e)&&(this.push(e),this._updateClassName())},c.remove=function(e){e+="";var t=l(this,e);-1!==t&&(this.splice(t,1),this._updateClassName())},c.toggle=function(e){e+="",-1===l(this,e)?this.add(e):this.remove(e)},c.toString=function(){return this.join(" ")},r.defineProperty){var d={get:h,enumerable:!0,configurable:!0};try{r.defineProperty(i,t,d)}catch(f){-2146823252===f.number&&(d.enumerable=!1,r.defineProperty(i,t,d))}}else r[n].__defineGetter__&&i.__defineGetter__(t,h)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new Rickshaw.Compat.ClassList,Rickshaw.namespace("Rickshaw.Graph"),Rickshaw.Graph=function(e){if(!e.element)throw"Rickshaw.Graph needs a reference to an element";this.element=e.element,this.series=e.series,this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0},Rickshaw.keys(this.defaults).forEach(function(t){this[t]=e[t]||this.defaults[t]},this),this.window={},this.updateCallbacks=[];var t=this;this.initialize=function(e){this.validateSeries(e.series),this.series.active=function(){return t.series.filter(function(e){return!e.disabled})},this.setSize({width:e.width,height:e.height}),this.element.classList.add("rickshaw_graph"),this.vis=d3.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height);var n=[Rickshaw.Graph.Renderer.Stack,Rickshaw.Graph.Renderer.Line,Rickshaw.Graph.Renderer.Bar,Rickshaw.Graph.Renderer.Area,Rickshaw.Graph.Renderer.ScatterPlot];n.forEach(function(e){e&&t.registerRenderer(new e({graph:t}))}),this.setRenderer(e.renderer||"stack",e),this.discoverRange()},this.validateSeries=function(e){if(!(e instanceof Array||e instanceof Rickshaw.Series)){var t=Object.prototype.toString.apply(e);throw"series is not an array: "+t}e.forEach(function(e){if(!(e instanceof Object))throw"series element is not an object: "+e;if(!e.data)throw"series has no data: "+JSON.stringify(e);if(!(e.data instanceof Array))throw"series data is not an array: "+JSON.stringify(e.data);var t=e.data[0].x,n=e.data[0].y;if("number"!=typeof t||"number"!=typeof n&&null!==n)throw"x and y properties of points should be numbers instead of "+typeof t+" and "+typeof n},this)},this.dataDomain=function(){var e=this.series[0].data;return[e[0].x,e.slice(-1).shift().x]},this.discoverRange=function(){var e=this.renderer.domain();this.x=d3.scale.linear().domain(e.x).range([0,this.width]),this.y=d3.scale.linear().domain(e.y).range([this.height,0]),this.y.magnitude=d3.scale.linear().domain([e.y[0]-e.y[0],e.y[1]-e.y[0]]).range([0,this.height])},this.render=function(){this.stackData(),this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(e){e()})},this.update=this.render,this.stackData=function(){var e=this.series.active().map(function(e){return e.data}).map(function(e){return e.filter(function(e){return this._slice(e)},this)},this);this.stackData.hooks.data.forEach(function(n){e=n.f.apply(t,[e])});var n;if(!this.renderer.unstack){this._validateStackable();var i=d3.layout.stack();i.offset(t.offset),n=i(e)}n=n||e,this.stackData.hooks.after.forEach(function(i){n=i.f.apply(t,[e])});var r=0;return this.series.forEach(function(e){e.disabled||(e.stack=n[r++])}),this.stackedData=n,n},this._validateStackable=function(){var e,t=this.series;t.forEach(function(t){if(e=e||t.data.length,e&&t.data.length!=e)throw"stacked series cannot have differing numbers of points: "+e+" vs "+t.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(e){if(this.window.xMin||this.window.xMax){var t=!0;return this.window.xMin&&e.x<this.window.xMin&&(t=!1),this.window.xMax&&e.x>this.window.xMax&&(t=!1),t}return!0},this.onUpdate=function(e){this.updateCallbacks.push(e)},this.registerRenderer=function(e){this._renderers=this._renderers||{},this._renderers[e.name]=e},this.configure=function(e){(e.width||e.height)&&this.setSize(e),Rickshaw.keys(this.defaults).forEach(function(t){this[t]=t in e?e[t]:t in this?this[t]:this.defaults[t]},this),this.setRenderer(e.renderer||this.renderer.name,e)},this.setRenderer=function(e,t){if(!this._renderers[e])throw"couldn't find renderer "+e;this.renderer=this._renderers[e],"object"==typeof t&&this.renderer.configure(t)},this.setSize=function(e){if(e=e||{},void 0!==typeof window)var t=window.getComputedStyle(this.element,null),n=parseInt(t.getPropertyValue("width")),i=parseInt(t.getPropertyValue("height"));this.width=e.width||n||400,this.height=e.height||i||250,this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(e)},Rickshaw.namespace("Rickshaw.Fixtures.Color"),Rickshaw.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},Rickshaw.namespace("Rickshaw.Fixtures.RandomData"),Rickshaw.Fixtures.RandomData=function(e){e=e||1;var t=200,n=Math.floor((new Date).getTime()/1e3);this.addData=function(i){var r=100*Math.random()+15+t,a=i[0].length,o=1;i.forEach(function(t){var i=20*Math.random(),s=r/25+o++ +15*(Math.cos(11*a*o/960)+2)+7*(Math.cos(a/7)+2)+1*(Math.cos(a/17)+2);t.push({x:a*e+n,y:s+i})}),t=.85*r}},Rickshaw.namespace("Rickshaw.Fixtures.Time"),Rickshaw.Fixtures.Time=function(){60*(new Date).getTimezoneOffset();var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(e){return 10*parseInt(e.getUTCFullYear()/10)}},{name:"year",seconds:31557600,formatter:function(e){return e.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(e){return e.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(e){return e.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(e){return e.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(e){return e.getUTCSeconds()+"s"}}],this.unit=function(e){return this.units.filter(function(t){return e==t.name}).shift()},this.formatDate=function(e){return e.toUTCString().match(/, (\w+ \w+ \w+)/)[1]},this.formatTime=function(e){return e.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(e,t){if("month"==t.name){var n=new Date(1e3*(e+t.seconds-1)),i=new Date(0);return i.setUTCFullYear(n.getUTCFullYear()),i.setUTCMonth(n.getUTCMonth()),i.setUTCDate(1),i.setUTCHours(0),i.setUTCMinutes(0),i.setUTCSeconds(0),i.setUTCMilliseconds(0),i.getTime()/1e3}if("year"==t.name){var n=new Date(1e3*(e+t.seconds-1)),i=new Date(0);return i.setUTCFullYear(n.getUTCFullYear()),i.setUTCMonth(0),i.setUTCDate(1),i.setUTCHours(0),i.setUTCMinutes(0),i.setUTCSeconds(0),i.setUTCMilliseconds(0),i.getTime()/1e3}return Math.ceil(e/t.seconds)*t.seconds}},Rickshaw.namespace("Rickshaw.Fixtures.Number"),Rickshaw.Fixtures.Number.formatKMBT=function(e){return abs_y=Math.abs(e),abs_y>=1e12?e/1e12+"T":abs_y>=1e9?e/1e9+"B":abs_y>=1e6?e/1e6+"M":abs_y>=1e3?e/1e3+"K":1>abs_y&&e>0?e.toFixed(2):0==abs_y?"":e},Rickshaw.Fixtures.Number.formatBase1024KMGTP=function(e){return abs_y=Math.abs(e),abs_y>=0x4000000000000?e/0x4000000000000+"P":abs_y>=1099511627776?e/1099511627776+"T":abs_y>=1073741824?e/1073741824+"G":abs_y>=1048576?e/1048576+"M":abs_y>=1024?e/1024+"K":1>abs_y&&e>0?e.toFixed(2):0==abs_y?"":e},Rickshaw.namespace("Rickshaw.Color.Palette"),Rickshaw.Color.Palette=function(e){var t=new Rickshaw.Fixtures.Color;if(e=e||{},this.schemes={},this.scheme=t.schemes[e.scheme]||e.scheme||t.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,e.interpolatedStopCount){var n,i,r=this.scheme.length-1,a=[];for(n=0;r>n;n++){a.push(this.scheme[n]);var o=d3.interpolateHsl(this.scheme[n],this.scheme[n+1]);for(i=1;e.interpolatedStopCount>i;i++)a.push(o(1/e.interpolatedStopCount*i))}a.push(this.scheme[this.scheme.length-1]),this.scheme=a}this.rotateCount=this.scheme.length,this.color=function(e){return this.scheme[e]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){if(Array.isArray(this.scheme)){var e;return this.generatorIndex==2*this.rotateCount-1?(e=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(e=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(e),e}}},Rickshaw.namespace("Rickshaw.Graph.Ajax"),Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(e){this.dataURL=e.dataURL,this.onData=e.onData||function(e){return e},this.onComplete=e.onComplete||function(){},this.onError=e.onError||function(){},this.args=e,this.request()},request:function(){$.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(e){e=this.onData(e),this.args.series=this._splice({data:e,series:this.args.series}),this.graph=this.graph||new Rickshaw.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(e){var t=e.data,n=e.series;return e.series?(n.forEach(function(e){var n=e.key||e.name;if(!n)throw"series needs a key or a name";t.forEach(function(t){var i=t.key||t.name;if(!i)throw"data needs a key or a name";if(n==i){var r=["color","name","data"];r.forEach(function(n){t[n]&&(e[n]=t[n])})}})}),n):t}}),Rickshaw.namespace("Rickshaw.Graph.Annotate"),Rickshaw.Graph.Annotate=function(e){this.graph=e.graph,this.elements={timeline:e.element};var t=this;this.data={},this.elements.timeline.classList.add("rickshaw_annotation_timeline"),this.add=function(e,n,i){t.data[e]=t.data[e]||{boxes:[]},t.data[e].boxes.push({content:n,end:i})},this.update=function(){Rickshaw.keys(t.data).forEach(function(e){var n=t.data[e],i=t.graph.x(e);if(0>i||i>t.graph.x.range()[1])return n.element&&(n.line.classList.add("offscreen"),n.element.style.display="none"),n.boxes.forEach(function(e){e.rangeElement&&e.rangeElement.classList.add("offscreen")}),void 0;if(!n.element){var r=n.element=document.createElement("div");r.classList.add("annotation"),this.elements.timeline.appendChild(r),r.addEventListener("click",function(){r.classList.toggle("active"),n.line.classList.toggle("active"),n.boxes.forEach(function(e){e.rangeElement&&e.rangeElement.classList.toggle("active")})},!1)}n.element.style.left=i+"px",n.element.style.display="block",n.boxes.forEach(function(e){var r=e.element;if(r||(r=e.element=document.createElement("div"),r.classList.add("content"),r.innerHTML=e.content,n.element.appendChild(r),n.line=document.createElement("div"),n.line.classList.add("annotation_line"),t.graph.element.appendChild(n.line),e.end&&(e.rangeElement=document.createElement("div"),e.rangeElement.classList.add("annotation_range"),t.graph.element.appendChild(e.rangeElement))),e.end){var a=i,o=Math.min(t.graph.x(e.end),t.graph.x.range()[1]);a>o&&(o=i,a=Math.max(t.graph.x(e.end),t.graph.x.range()[0]));var s=o-a;e.rangeElement.style.left=a+"px",e.rangeElement.style.width=s+"px",e.rangeElement.classList.remove("offscreen")}n.line.classList.remove("offscreen"),n.line.style.left=i+"px"})},this)},this.graph.onUpdate(function(){t.update()})},Rickshaw.namespace("Rickshaw.Graph.Axis.Time"),Rickshaw.Graph.Axis.Time=function(e){var t=this;this.graph=e.graph,this.elements=[],this.ticksTreatment=e.ticksTreatment||"plain",this.fixedTimeUnit=e.timeUnit;var n=new Rickshaw.Fixtures.Time;this.appropriateTimeUnit=function(){var e,t=n.units,i=this.graph.x.domain(),r=i[1]-i[0];
return t.forEach(function(t){Math.floor(r/t.seconds)>=2&&(e=e||t)}),e||n.units[n.units.length-1]},this.tickOffsets=function(){for(var e=this.graph.x.domain(),t=this.fixedTimeUnit||this.appropriateTimeUnit(),i=Math.ceil((e[1]-e[0])/t.seconds),r=e[0],a=[],o=0;i>o;o++){var s=n.ceil(r,t);r=s+t.seconds/2,a.push({value:s,unit:t})}return a},this.render=function(){this.elements.forEach(function(e){e.parentNode.removeChild(e)}),this.elements=[];var e=this.tickOffsets();e.forEach(function(e){if(!(t.graph.x(e.value)>t.graph.x.range()[1])){var n=document.createElement("div");n.style.left=t.graph.x(e.value)+"px",n.classList.add("x_tick"),n.classList.add(t.ticksTreatment);var i=document.createElement("div");i.classList.add("title"),i.innerHTML=e.unit.formatter(new Date(1e3*e.value)),n.appendChild(i),t.graph.element.appendChild(n),t.elements.push(n)}})},this.graph.onUpdate(function(){t.render()})},Rickshaw.namespace("Rickshaw.Graph.Axis.X"),Rickshaw.Graph.Axis.X=function(e){var t=this,n=.1;this.initialize=function(e){this.graph=e.graph,this.orientation=e.orientation||"top";var n=e.pixelsPerTick||75;this.ticks=e.ticks||Math.floor(this.graph.width/n),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",e.element?(this.element=e.element,this._discoverSize(e.element,e),this.vis=d3.select(e.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){t.render()})},this.setSize=function(e){if(e=e||{},this.element){this._discoverSize(this.element.parentNode,e),this.vis.attr("height",this.height).attr("width",this.width*(1+n));var t=Math.floor(this.width*n/2);this.element.style.left=-1*t+"px"}},this.render=function(){this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var t=d3.svg.axis().scale(this.graph.x).orient(this.orientation);t.tickFormat(e.tickFormat||function(e){return e});var i=Math.floor(this.width*n/2)||0;if("top"==this.orientation)var r=this.height||this.graph.height,a="translate("+i+","+r+")";else var a="translate("+i+", 0)";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",a).call(t.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var o=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(o)),this._renderHeight=this.graph.height},this._discoverSize=function(e,t){if("undefined"!=typeof window){var i=window.getComputedStyle(e,null),r=parseInt(i.getPropertyValue("height"));if(!t.auto)var a=parseInt(i.getPropertyValue("width"))}this.width=(t.width||a||this.graph.width)*(1+n),this.height=t.height||r||40},this.initialize(e)},Rickshaw.namespace("Rickshaw.Graph.Axis.Y"),Rickshaw.Graph.Axis.Y=function(e){var t=this,n=.1;this.initialize=function(e){this.graph=e.graph,this.orientation=e.orientation||"right";var n=e.pixelsPerTick||75;this.ticks=e.ticks||Math.floor(this.graph.height/n),this.tickSize=e.tickSize||4,this.ticksTreatment=e.ticksTreatment||"plain",e.element?(this.element=e.element,this.vis=d3.select(e.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){t.render()})},this.setSize=function(e){if(e=e||{},this.element){if("undefined"!=typeof window){var t=window.getComputedStyle(this.element.parentNode,null),i=parseInt(t.getPropertyValue("width"));if(!e.auto)var r=parseInt(t.getPropertyValue("height"))}this.width=e.width||i||this.graph.width*n,this.height=e.height||r||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+n));var a=this.height*n;this.element.style.top=-1*a+"px"}},this.render=function(){this.graph.height!==this._renderHeight&&this.setSize({auto:!0});var t=d3.svg.axis().scale(this.graph.y).orient(this.orientation);if(t.tickFormat(e.tickFormat||function(e){return e}),"left"==this.orientation)var i=this.height*n,r="translate("+this.width+", "+i+")";this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",r).call(t.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var a=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(a)),this._renderHeight=this.graph.height},this.initialize(e)},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),Rickshaw.Graph.Behavior.Series.Highlight=function(e){this.graph=e.graph,this.legend=e.legend;var t=this,n={},i=null;this.addHighlightEvents=function(e){e.element.addEventListener("mouseover",function(){i||(i=e,t.legend.lines.forEach(function(i,r){if(e!==i)n[i.series.name]=n[i.series.name]||i.series.color,i.series.color=""+d3.interpolateRgb(i.series.color,d3.rgb("#d8d8d8"))(.8);else if(r>0&&t.graph.renderer.unstack){var a=t.graph.series.length-r-1;i.originalIndex=a;var o=t.graph.series.splice(a,1)[0];t.graph.series.push(o)}}),t.graph.update())},!1),e.element.addEventListener("mouseout",function(){i&&(i=null,t.legend.lines.forEach(function(i){if(e===i&&i.hasOwnProperty("originalIndex")){var r=t.graph.series.pop();t.graph.series.splice(i.originalIndex,0,r),delete i.originalIndex}n[i.series.name]&&(i.series.color=n[i.series.name])}),t.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(e){t.addHighlightEvents(e)})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Order"),Rickshaw.Graph.Behavior.Series.Order=function(e){this.graph=e.graph,this.legend=e.legend;var t=this;$(function(){$(t.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(){var e=[];$(t.legend.list).find("li").each(function(t,n){n.series&&e.push(n.series)});for(var n=t.graph.series.length-1;n>=0;n--)t.graph.series[n]=e.shift();t.graph.update()}}),$(t.legend.list).disableSelection()}),this.graph.onUpdate(function(){var e=window.getComputedStyle(t.legend.element).height;t.legend.element.style.height=e})},Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),Rickshaw.Graph.Behavior.Series.Toggle=function(e){this.graph=e.graph,this.legend=e.legend;var t=this;this.addAnchor=function(e){var n=document.createElement("a");n.innerHTML="&#10004;",n.classList.add("action"),e.element.insertBefore(n,e.element.firstChild),n.onclick=function(){e.series.disabled?(e.series.enable(),e.element.classList.remove("disabled")):(e.series.disable(),e.element.classList.add("disabled"))};var i=e.element.getElementsByTagName("span")[0];i.onclick=function(){var n=e.series.disabled;if(!n)for(var i=0;t.legend.lines.length>i;i++){var r=t.legend.lines[i];if(e.series===r.series);else if(!r.series.disabled){n=!0;break}}n?(e.series.enable(),e.element.classList.remove("disabled"),t.legend.lines.forEach(function(t){e.series===t.series||(t.series.disable(),t.element.classList.add("disabled"))})):t.legend.lines.forEach(function(e){e.series.enable(),e.element.classList.remove("disabled")})}},this.legend&&($(this.legend.list).sortable({start:function(e,t){t.item.bind("no.onclick",function(e){e.preventDefault()})},stop:function(e,t){setTimeout(function(){t.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(e){t.addAnchor(e)})),this._addBehavior=function(){this.graph.series.forEach(function(e){e.disable=function(){if(1>=t.graph.series.length)throw"only one series left";e.disabled=!0,t.graph.update()},e.enable=function(){e.disabled=!1,t.graph.update()}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},Rickshaw.namespace("Rickshaw.Graph.HoverDetail"),Rickshaw.Graph.HoverDetail=Rickshaw.Class.create({initialize:function(e){var t=this.graph=e.graph;this.xFormatter=e.xFormatter||function(e){return new Date(1e3*e).toUTCString()},this.yFormatter=e.yFormatter||function(e){return null===e?e:e.toFixed(2)};var n=this.element=document.createElement("div");n.className="detail",this.visible=!0,t.element.appendChild(n),this.lastEvent=null,this._addListeners(),this.onShow=e.onShow,this.onHide=e.onHide,this.onRender=e.onRender,this.formatter=e.formatter||this.formatter},formatter:function(e,t,n,i,r){return e.name+":&nbsp;"+r},update:function(e){if(e=e||this.lastEvent,e&&(this.lastEvent=e,e.target.nodeName.match(/^(path|svg|rect)$/))){var t,n=this.graph,i=e.offsetX||e.layerX,r=e.offsetY||e.layerY,a=0,o=[];this.graph.series.active().forEach(function(e){for(var s=this.graph.stackedData[a++],l=n.x.invert(i),u=d3.scale.linear().domain([s[0].x,s.slice(-1)[0].x]).range([0,s.length-1]),c=Math.round(u(l)),h=Math.min(c||0,s.length-1),d=c;s.length-1>d&&s[d]&&s[d+1];){if(l>=s[d].x&&s[d+1].x>l){h=d;break}l>=s[d+1].x?d++:d--}0>h&&(h=0);var f=s[h],p=Math.sqrt(Math.pow(Math.abs(n.x(f.x)-i),2)+Math.pow(Math.abs(n.y(f.y+f.y0)-r),2)),m=e.xFormatter||this.xFormatter,g=e.yFormatter||this.yFormatter,v={formattedXValue:m(f.x),formattedYValue:g(f.y),series:e,value:f,distance:p,order:a,name:e.name};(!t||t.distance>p)&&(t=v),o.push(v)},this),t.active=!0;var s=t.value.x,l=t.formattedXValue;this.element.innerHTML="",this.element.style.left=n.x(s)+"px",this.visible&&this.render({points:o,detail:o,mouseX:i,mouseY:r,formattedXValue:l,domainX:s})}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(e){var t=this.graph,n=e.points,i=n.filter(function(e){return e.active}).shift();if(null!==i.value.y){var r=this.xFormatter(i.value.x),a=this.yFormatter(i.value.y);this.element.innerHTML="",this.element.style.left=t.x(i.value.x)+"px";var o=document.createElement("div");o.className="x_label",o.innerHTML=r,this.element.appendChild(o);var s=document.createElement("div");s.className="item",s.innerHTML=this.formatter(i.series,i.value.x,i.value.y,r,a,i),s.style.top=this.graph.y(i.value.y0+i.value.y)+"px",this.element.appendChild(s);var l=document.createElement("div");l.className="dot",l.style.top=s.style.top,l.style.borderColor=i.series.color,this.element.appendChild(l),i.active&&(s.className="item active",l.className="dot active"),this.show(),"function"==typeof this.onRender&&this.onRender(e)}},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(e){this.visible=!0,this.update(e)}.bind(this),!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.graph.element.addEventListener("mouseout",function(e){!e.relatedTarget||e.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),!1)}}),Rickshaw.namespace("Rickshaw.Graph.JSONP"),Rickshaw.Graph.JSONP=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){$.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),Rickshaw.namespace("Rickshaw.Graph.Legend"),Rickshaw.Graph.Legend=function(e){var t=this.element=e.element,n=this.graph=e.graph,i=this;t.classList.add("rickshaw_legend");var r=this.list=document.createElement("ul");t.appendChild(r);var a=n.series.map(function(e){return e});e.naturalOrder||(a=a.reverse()),this.lines=[],this.addLine=function(e){var t=document.createElement("li");t.className="line",e.disabled&&(t.className+=" disabled");var n=document.createElement("div");n.className="swatch",n.style.backgroundColor=e.color,t.appendChild(n);var a=document.createElement("span");a.className="label",a.innerHTML=e.name,t.appendChild(a),r.appendChild(t),t.series=e,e.noLegend&&(t.style.display="none");var o={element:t,series:e};i.shelving&&(i.shelving.addAnchor(o),i.shelving.updateBehaviour()),i.highlighter&&i.highlighter.addHighlightEvents(o),i.lines.push(o)},a.forEach(function(e){i.addLine(e)}),n.onUpdate(function(){})},Rickshaw.namespace("Rickshaw.Graph.RangeSlider"),Rickshaw.Graph.RangeSlider=function(e){var t=this.element=e.element,n=this.graph=e.graph;$(function(){$(t).slider({range:!0,min:n.dataDomain()[0],max:n.dataDomain()[1],values:[n.dataDomain()[0],n.dataDomain()[1]],slide:function(e,t){n.window.xMin=t.values[0],n.window.xMax=t.values[1],n.update(),n.dataDomain()[0]==t.values[0]&&(n.window.xMin=void 0),n.dataDomain()[1]==t.values[1]&&(n.window.xMax=void 0)}})}),t[0].style.width=n.width+"px",n.onUpdate(function(){var e=$(t).slider("option","values");$(t).slider("option","min",n.dataDomain()[0]),$(t).slider("option","max",n.dataDomain()[1]),void 0==n.window.xMin&&(e[0]=n.dataDomain()[0]),void 0==n.window.xMax&&(e[1]=n.dataDomain()[1]),$(t).slider("option","values",e)})},Rickshaw.namespace("Rickshaw.Graph.Renderer"),Rickshaw.Graph.Renderer=Rickshaw.Class.create({initialize:function(e){this.graph=e.graph,this.tension=e.tension||this.tension,this.graph.unstacker=this.graph.unstacker||new Rickshaw.Graph.Unstacker({graph:this.graph}),this.configure(e)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1}},domain:function(){var e=this.graph.stackedData||this.graph.stackData(),t=e[0][0],n=t.x,i=t.x,r=t.y+t.y0,a=t.y+t.y0;return e.forEach(function(e){e.forEach(function(e){if(void 0!=e.y){var t=e.y+e.y0;r>t&&(r=t),t>a&&(a=t)}}),n>e[0].x&&(n=e[0].x),e[e.length-1].x>i&&(i=e[e.length-1].x)}),n-=(i-n)*this.padding.left,i+=(i-n)*this.padding.right,r="auto"===this.graph.min?r:this.graph.min||0,a=void 0===this.graph.max?a:this.graph.max,("auto"===this.graph.min||0>r)&&(r-=(a-r)*this.padding.bottom),void 0===this.graph.max&&(a+=(a-r)*this.padding.top),{x:[n,i],y:[r,a]}},render:function(){var e=this.graph;e.vis.selectAll("*").remove();var t=e.vis.selectAll("path").data(this.graph.stackedData).enter().append("svg:path").attr("d",this.seriesPathFactory()),n=0;e.series.forEach(function(e){e.disabled||(e.path=t[0][n++],this._styleSeries(e))},this)},_styleSeries:function(e){var t=this.fill?e.color:"none",n=this.stroke?e.color:"none";e.path.setAttribute("fill",t),e.path.setAttribute("stroke",n),e.path.setAttribute("stroke-width",this.strokeWidth),e.path.setAttribute("class",e.className)},configure:function(e){e=e||{},Rickshaw.keys(this.defaults()).forEach(function(t){return e.hasOwnProperty(t)?("object"==typeof this.defaults()[t]?Rickshaw.keys(this.defaults()[t]).forEach(function(n){this[t][n]=void 0!==e[t][n]?e[t][n]:void 0!==this[t][n]?this[t][n]:this.defaults()[t][n]},this):this[t]=void 0!==e[t]?e[t]:void 0!==this[t]?this[t]:void 0!==this.graph[t]?this.graph[t]:this.defaults()[t],void 0):(this[t]=this[t]||this.graph[t]||this.defaults()[t],void 0)},this)},setStrokeWidth:function(e){void 0!==e&&(this.strokeWidth=e)},setTension:function(e){void 0!==e&&(this.tension=e)}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Line"),Rickshaw.Graph.Renderer.Line=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"line",defaults:function(e){return Rickshaw.extend(e(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var e=this.graph,t=d3.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return t.defined&&t.defined(function(e){return null!==e.y}),t}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Stack"),Rickshaw.Graph.Renderer.Stack=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"stack",defaults:function(e){return Rickshaw.extend(e(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var e=this.graph,t=d3.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return t.defined&&t.defined(function(e){return null!==e.y}),t}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Bar"),Rickshaw.Graph.Renderer.Bar=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"bar",defaults:function(e){var t=Rickshaw.extend(e(),{gapSize:.05,unstack:!1});return delete t.tension,t},initialize:function(e,t){t=t||{},this.gapSize=t.gapSize||this.gapSize,e(t)},domain:function(e){var t=e(),n=this._frequentInterval();return t.x[1]+=parseInt(n.magnitude),t},barWidth:function(){var e=this.graph.stackedData||this.graph.stackData(),t=e.slice(-1).shift(),n=this._frequentInterval(),i=this.graph.x(t[0].x+n.magnitude*(1-this.gapSize));return i},render:function(){var e=this.graph;e.vis.selectAll("*").remove();var t=this.barWidth(),n=0,i=e.series.filter(function(e){return!e.disabled}).length,r=this.unstack?t/i:t,a=function(t){var n=[1,0,0,0>t.y?-1:1,0,0>t.y?2*e.y.magnitude(Math.abs(t.y)):0];return"matrix("+n.join(",")+")"};e.series.forEach(function(t){if(!t.disabled){var i=e.vis.selectAll("path").data(t.stack.filter(function(e){return null!==e.y})).enter().append("svg:rect").attr("x",function(t){return e.x(t.x)+n}).attr("y",function(t){return e.y(t.y0+Math.abs(t.y))*(0>t.y?-1:1)}).attr("width",r).attr("height",function(t){return e.y.magnitude(Math.abs(t.y))}).attr("transform",a);Array.prototype.forEach.call(i[0],function(e){e.setAttribute("fill",t.color)}),this.unstack&&(n+=r)}},this)},_frequentInterval:function(){for(var e=this.graph.stackedData||this.graph.stackData(),t=e.slice(-1).shift(),n={},i=0;t.length-1>i;i++){var r=t[i+1].x-t[i].x;n[r]=n[r]||0,n[r]++}var a={count:0};return Rickshaw.keys(n).forEach(function(e){a.count<n[e]&&(a={count:n[e],magnitude:e})}),this._frequentInterval=function(){return a},a}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.Area"),Rickshaw.Graph.Renderer.Area=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"area",defaults:function(e){return Rickshaw.extend(e(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var e=this.graph,t=d3.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return t.defined&&t.defined(function(e){return null!==e.y}),t},seriesStrokeFactory:function(){var e=this.graph,t=d3.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return t.defined&&t.defined(function(e){return null!==e.y}),t},render:function(){var e=this.graph;e.vis.selectAll("*").remove();var t=this.unstack?"append":"insert",n=e.vis.selectAll("path").data(this.graph.stackedData).enter()[t]("svg:g","g");n.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&n.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var i=0;e.series.forEach(function(e){e.disabled||(e.path=n[0][i++],this._styleSeries(e))},this)},_styleSeries:function(e){e.path&&(d3.select(e.path).select(".area").attr("fill",e.color),this.stroke&&d3.select(e.path).select(".line").attr("fill","none").attr("stroke",e.stroke||d3.interpolateRgb(e.color,"black")(.125)).attr("stroke-width",this.strokeWidth),e.className&&e.path.setAttribute("class",e.className))}}),Rickshaw.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),Rickshaw.Graph.Renderer.ScatterPlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"scatterplot",defaults:function(e){return Rickshaw.extend(e(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function(e,t){e(t)},render:function(){var e=this.graph;e.vis.selectAll("*").remove(),e.series.forEach(function(t){if(!t.disabled){var n=e.vis.selectAll("path").data(t.stack.filter(function(e){return null!==e.y})).enter().append("svg:circle").attr("cx",function(t){return e.x(t.x)}).attr("cy",function(t){return e.y(t.y)}).attr("r",function(t){return"r"in t?t.r:e.renderer.dotSize});Array.prototype.forEach.call(n[0],function(e){e.setAttribute("fill",t.color)})}},this)}}),Rickshaw.namespace("Rickshaw.Graph.Smoother"),Rickshaw.Graph.Smoother=function(e){this.graph=e.graph,this.element=e.element;var t=this;this.aggregationScale=1,this.element&&$(function(){$(t.element).slider({min:1,max:100,slide:function(e,n){t.setScale(n.value),t.graph.update()}})}),t.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:function(e){if(1==t.aggregationScale)return e;var n=[];return e.forEach(function(e){for(var i=[];e.length;){var r=0,a=0,o=e.splice(0,t.aggregationScale);o.forEach(function(e){r+=e.x/o.length,a+=e.y/o.length}),i.push({x:r,y:a})}n.push(i)}),n}}),this.setScale=function(e){if(1>e)throw"scale out of range: "+e;this.aggregationScale=e,this.graph.update()}},Rickshaw.namespace("Rickshaw.Graph.Unstacker"),Rickshaw.Graph.Unstacker=function(e){this.graph=e.graph;var t=this;this.graph.stackData.hooks.after.push({name:"unstacker",f:function(e){return t.graph.renderer.unstack?(e.forEach(function(e){e.forEach(function(e){e.y0=0})}),e):e}})},Rickshaw.namespace("Rickshaw.Series"),Rickshaw.Series=Rickshaw.Class.create(Array,{initialize:function(e,t,n){n=n||{},this.palette=new Rickshaw.Color.Palette(t),this.timeBase=n.timeBase===void 0?Math.floor((new Date).getTime()/1e3):n.timeBase;var i=n.timeInterval===void 0?1e3:n.timeInterval;this.setTimeInterval(i),e&&"object"==typeof e&&e instanceof Array&&e.forEach(function(e){this.addItem(e)},this)},addItem:function(e){if(e.name===void 0)throw"addItem() needs a name";e.color=e.color||this.palette.color(e.name),e.data=e.data||[],0==e.data.length&&this.length&&this.getIndex()>0?this[0].data.forEach(function(t){e.data.push({x:t.x,y:0})}):0==e.data.length&&e.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(e),this.legend&&this.legend.addLine(this.itemByName(e.name))},addData:function(e){var t=this.getIndex();Rickshaw.keys(e).forEach(function(e){this.itemByName(e)||this.addItem({name:e})},this),this.forEach(function(n){n.data.push({x:(t*this.timeInterval||1)+this.timeBase,y:e[n.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(e){for(var t=0;this.length>t;t++)if(this[t].name==e)return this[t]},setTimeInterval:function(e){this.timeInterval=e/1e3},setTimeBase:function(e){this.timeBase=e},dump:function(){var e={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(t){var n={color:t.color,name:t.name,data:[]};t.data.forEach(function(e){n.data.push({x:e.x,y:e.y})}),e.items.push(n)}),e},load:function(e){e.timeInterval&&(this.timeInterval=e.timeInterval),e.timeBase&&(this.timeBase=e.timeBase),e.items&&e.items.forEach(function(e){this.push(e),this.legend&&this.legend.addLine(this.itemByName(e.name))},this)}}),Rickshaw.Series.zeroFill=function(e){Rickshaw.Series.fill(e,0)},Rickshaw.Series.fill=function(e,t){for(var n,i=0,r=e.map(function(e){return e.data});Math.max.apply(null,r.map(function(e){return e.length}))>i;)n=Math.min.apply(null,r.filter(function(e){return e[i]}).map(function(e){return e[i].x})),r.forEach(function(e){e[i]&&e[i].x==n||e.splice(i,0,{x:n,y:t})}),i++},Rickshaw.namespace("Rickshaw.Series.FixedDuration"),Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(e,t,n){var n=n||{};if(n.timeInterval===void 0)throw Error("FixedDuration series requires timeInterval");if(n.maxDataPoints===void 0)throw Error("FixedDuration series requires maxDataPoints");if(this.palette=new Rickshaw.Color.Palette(t),this.timeBase=n.timeBase===void 0?Math.floor((new Date).getTime()/1e3):n.timeBase,this.setTimeInterval(n.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=n.maxDataPoints,e&&"object"==typeof e&&e instanceof Array&&(e.forEach(function(e){this.addItem(e)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,this.maxDataPoints!==void 0&&this.currentSize<this.maxDataPoints)for(var i=this.maxDataPoints-this.currentSize-1;i>0;i--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(e){e.data.unshift({x:((i-1)*this.timeInterval||1)+this.timeBase,y:0,i:i})},this)},addData:function(e,t){if(e(t),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(e){e.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}});